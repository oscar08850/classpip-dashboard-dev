<div class="titulo">Juegos</div>
<mat-divider class="lineaDivisoria"></mat-divider>


<div class="contenedor">

  <mat-tab-group [color]="primary" [backgroundColor]="primary" #tabs>

    <!-- ///////////////////////////////////////// LISTA DE JUEGOS  //////////////////////////////////////////////////-->

    <mat-tab index="0" label="Lista de juegos">

      <br>
      <br>
      <form>

        <div>
          <mat-list>

            <!-- ///////////////////////// LISTA DE JUEGOS ACTIVOS /////////////////////////////////-->
            <h3 class="CabeceraActivos" style="color: white;font-style: bold;font-size: 2em;" mat-subheader>Juegos
              Activos</h3>

            <form *ngIf="juegosActivos ;else Aviso_no_juegos_activos">
              <mat-list-item *ngFor="let juego of juegosActivos" (click)=JuegoSeleccionado(juego)
                routerLink="juegoSeleccionadoActivo">

                <mat-icon mat-list-icon><i class="material-icons green">check_circle_outline</i></mat-icon>
                <h4 mat-line>{{juego.NombreJuego}}</h4>
                <p mat-line> {{juego.Tipo}}: {{juego.Modo}} </p>
              </mat-list-item>
            </form>
            <ng-template #Aviso_no_juegos_activos>
              No hay juegos activos
            </ng-template>


            <!-- ///////////////////////// LISTA DE JUEGOS INACTIVOS /////////////////////////////////-->
            <br>
            <br>
            <h3 class="CabeceraInactivos" style="color: white;font-style: bold;font-size: 2em;" mat-subheader>Juegos
              Inactivos</h3>
            <form *ngIf="juegosInactivos;else Aviso_no_juegos_inactivos">
              <mat-list-item *ngFor="let juego of juegosInactivos" (click)=JuegoSeleccionado(juego)
                routerLink="juegoSeleccionadoInactivo">
                <mat-icon mat-list-icon><i class="material-icons red">history</i></mat-icon>
                <h4 class="ItemsInactivos" mat-line>{{juego.NombreJuego}}</h4>
                <p class="ItemsInactivos" mat-line> {{juego.Tipo}}: {{juego.Modo}} </p>
              </mat-list-item>


            </form>
            <ng-template #Aviso_no_juegos_inactivos>
              No hay juegos inactivos
            </ng-template>

            <!-- /////////////////////// LISTA JUEGOS PREPARADOS ///////////////////////////////////// -->
            <br>
            <br>
            <h3 class="CabeceraPreparados" style="color: white;font-style: bold;font-size: 2em;" mat-subheader>Juegos
              Preparados</h3>

            <form *ngIf="juegosPreparados ;else Aviso_no_juegos_Preparados">
              <mat-list-item *ngFor="let juego of juegosPreparados" (click)=JuegoSeleccionado(juego)
                routerLink="juegoSeleccionadoPreparado">

                <mat-icon mat-list-icon><i class="material-icons green">alarm_on</i></mat-icon>
                <h4 mat-line>{{juego.NombreJuego}}</h4>
                <p mat-line> {{juego.Tipo}}: {{juego.Modo}} </p>
              </mat-list-item>
            </form>
            <ng-template #Aviso_no_juegos_Preparados>
              No hay juegos preparados
            </ng-template>
          </mat-list>

        </div>

      </form>
    </mat-tab>





    <!-- ////////////////////////////////////////////// CREAR JUEGO  //////////////////////////////////////////////////-->

    <mat-tab label="Crear juego">

      <form [formGroup]="myForm">
        <mat-card class="panel" style="width: 90%">

          <mat-card-content>
            <mat-horizontal-stepper #stepper #linearHorizontalStepper="matHorizontalStepper" [linear]="true">


              <!-- /////////////////////// PASO 0: INTRODUCIR NOMBRE ////////////////////////////////-->
              <mat-step>


                <ng-template matStepLabel>
                  <div>Nombre</div>
                </ng-template>
                <div>

                  <mat-form-field>
                    <mat-label>Introduzca el nombre del juego</mat-label>
                    <input matInput placeholder="Escriba el Nombre" requiered formControlName="NombreDelJuego"
                      (keyup)="GuardaNombreDelJuego()">
                  </mat-form-field>

                  <div class="btnCambiarStep">
                    <button type="button" class="btn Next" [disabled]="!tengoNombre" matStepperNext>Siguiente</button>
                  </div>
                </div>
              </mat-step>

              <!-- /////////////////////// PRIMER PASO: SELECCIÓN DEL TIPO DE JUEGO ////////////////////////////////-->
              <mat-step>
                <ng-template matStepLabel>Tipo</ng-template>

                <!-- 
                  <div class="colorsChips">

                    <label class="LabelStepper">Selecciona un tipo de juego:</label>
                    <mat-chip-list class="mat-chip-list-stacked">
                      <mat-chip *ngFor="let tipo of seleccionTipoJuego; let i = index" selected [color]="tipo.color"
                        selected="{{seleccionTipoJuego[i].selected}}"
                        (click)="TipoDeJuegoSeleccionado(seleccionTipoJuego[i])" [value]="tipo.nombre"
                        [selectable]="true">
                        {{tipo.nombre}}
                      </mat-chip>
                    </mat-chip-list>
                    <span style="font-weight: bold;color:green;" color="secundary">Has elegido ...
                      {{tipoDeJuegoSeleccionado}} </span>
                  </div> -->


                <div class="enColumna">
                  <span style="font-weight: bold;color:green;" color="secundary">Has elegido ...
                    {{tipoDeJuegoSeleccionado}} </span>
                  <br>
                  <div class="enFila" style="height: 20%">

                    <div class="enColumna" (click)="TipoDeJuegoSeleccionado ('Juego De Puntos')"
                      style="background: rgb(242, 215, 213); width:22%">
                      <div style="height: 10%"><strong>Juego de Puntos</strong></div>
                      <br>
                      <div style="height: 40%">
                        <img src="../assets/puntosicon.svg" class="imagenPanelJuegos" />
                      </div>
                    </div>
                    <div class="enColumna" (click)="TipoDeJuegoSeleccionado ('Juego De Colección')"
                      style="background: rgb(50, 155, 94); width:22%">
                      <div style="height: 10%"><strong>Juego de Colección</strong></div>
                      <br>
                      <div style="height: 40%">
                        <img src="../assets/collectionicon.svg" class="imagenPanelJuegos" />
                      </div>
                    </div>
                    <div class="enColumna" (click)="TipoDeJuegoSeleccionado ('Juego De Competición')"
                      style="background: rgb(168, 119, 85); width:22%">
                      <div style="height: 10%"><strong>Juego de Competición</strong></div>
                      <br>
                      <div style="height: 40%">
                        <img src="../assets/f1icon.svg" class="imagenPanelJuegos" />
                      </div>
                    </div>
                    <div class="enColumna" (click)="TipoDeJuegoSeleccionado ('Juego De Cuestionario')"
                      style="background: rgb(111, 147, 177); width:22%">
                      <div style="height: 10%"><strong>Juego de Cuestionario</strong></div>
                      <br>
                      <div style="height: 40%">
                        <img src="../assets/cuestionariosicon.svg" class="imagenPanelJuegos" />
                      </div>
                    </div>

                  </div>

                  <div class="enFila" style="height: 20%">

                    <div class="enColumna" (click)="TipoDeJuegoSeleccionado ('Juego De Avatar')"
                      style="background: rgb(199, 107, 184); width:22%">
                      <div style="height: 10%"><strong>Juego de Avatar</strong></div>
                      <br>
                      <div style="height: 40%">
                        <img src="../assets/avataricon.svg" class="imagenPanelJuegos" />
                      </div>
                    </div>
                    <div class="enColumna" (click)="TipoDeJuegoSeleccionado ('Juego De Geocaching')"
                      style="background: rgb(224, 180, 84); width:22%">
                      <div style="height: 10%"><strong>Juego de Geocaching</strong></div>
                      <br>
                      <div style="height: 40%">
                        <img src="../assets/location_icon.svg" class="imagenPanelJuegos" />
                      </div>
                    </div>
                    <div class="enColumna" (click)="TipoDeJuegoSeleccionado ('Juego De Votación')"
                      style="background: rgb(82, 172, 179); width:22%">
                      <div style="height: 10%"><strong>Juego de Votación</strong></div>
                      <br>
                      <div style="height: 40%">
                        <img src="../assets/votaciones.jpg" class="imagenPanelJuegos" />
                      </div>
                    </div>
                    <div class="enColumna" (click)="TipoDeJuegoSeleccionado ('Juego De Cuestionario de Satisfacción')"
                      style="background: rgb(194, 188, 176); width:22%">
                      <div style="height: 10%"><strong>Juego de Cuestionario de Satisfacción</strong></div>
                      <br>
                      <div style="height: 40%">
                        <img src="../assets/satisfaccion.png" class="imagenPanelJuegos" />
                      </div>
                    </div>

                  </div>

                  <div class="enFila" style="height: 20%">

                    <div class="enColumna" (click)="TipoDeJuegoSeleccionado ('Juego De Evaluación')"
                      style="background: rgb(93, 199, 181); width:22%">
                      <div style="height: 10%"><strong>Juego de Evaluación</strong></div>
                      <br>
                      <div style="height: 40%">
                        <img src="../assets/evaluacion.png" class="imagenPanelJuegos" />
                      </div>
                    </div>
                    <div class="enColumna" (click)="TipoDeJuegoSeleccionado ('Control de trabajo en equipo')"
                      style="background: rgb(185, 93, 128); width:22%">
                      <div style="height: 10%"><strong>Control de trabajo en equipo</strong></div>
                      <br>
                      <div style="height: 40%">
                        <img src="../assets/TrabajoEnEquipo.png" class="imagenPanelJuegos" />
                      </div>
                    </div>
                    <div class="enColumna" (click)="TipoDeJuegoSeleccionado ('Juego De Cuentos')"
                      style="background: rgb(142, 185, 93); width:22%">
                      <div style="height: 10%"><strong>Juego de Cuentos</strong></div>
                      <br>
                      <div style="height: 40%">
                        <img src="../assets/cuentos.png" class="imagenPanelJuegos" />
                      </div>
                    </div>
                    <div class="enColumna" (click)="TipoDeJuegoSeleccionado ('Juego De Memorama')"
                      style="background: rgb(50, 155, 94);  width:22%">
                      <div style="height: 10%"><strong>Juego de Memorama</strong></div>
                      <br>
                      <div style="height: 40%">
                        <img src="../assets/memorama.png" class="imagenPanelJuegos" />
                      </div>
                    </div>


                  </div>

                  <div class="enFila" style="height: 20%">

                    <div class="enColumna" (click)="TipoDeJuegoSeleccionado ('Juego De Lingo')"
                      style="background: rgb(93, 199, 181); width:22%">
                      <div style="height: 10%"><strong>Juego de Lingo</strong></div>
                      <br>
                      <div style="height: 40%">
                        <img src="../assets/lingo.jpg" class="imagenPanelJuegos" />
                      </div>
                    </div>


                  </div>


                </div>


                <div class="btnCambiarStep">
                  <button type="button" class="btn Back" matStepperPrevious>Atrás</button>
                  <button [disabled]="!tengoTipo" type="button" class="btn Next" matStepperNext>Siguiente</button>
                </div>



              </mat-step>

              <!-- //////////////////////// SEGUNDO PASO: SELECCIÓN DEL MODO DE JUEGO ///////////////////////// -->
              <!-- /// NO HAY QUE HACERLO EN CASO DE CONTROL DE TRABAJO EN EQUIPO ///////-->
              <div *ngIf="tipoDeJuegoSeleccionado !== 'Control de trabajo en equipo'">
                <mat-step>
                  <ng-template matStepLabel>
                    <div>Modo</div>
                  </ng-template>

                  <div class="colorsChips">

                    <label class="LabelStepper">Selecciona un modo de juego:</label>
                    <mat-chip-list class="mat-chip-list-stacked">
                      <mat-chip *ngFor="let tipo of seleccionModoJuego; let i = index" selected [color]="tipo.color"
                        selected="{{seleccionModoJuego[i].selected}}"
                        (click)="ModoDeJuegoSeleccionado(seleccionModoJuego[i])" [value]="tipo.nombre"
                        [selectable]="true">
                        {{tipo.nombre}}
                      </mat-chip>
                    </mat-chip-list>
                    <span style="font-weight: bold;color:green;"> Has elegido ... {{tipoDeJuegoSeleccionado}} ...
                      {{modoDeJuegoSeleccionado}} </span>

                  </div>



                  <div class="btnCambiarStep">
                    <button type="button" class="btn Back" matStepperPrevious>Atrás</button>
                    <button type="button" class="btn Next" [disabled]="!tengoModo" matStepperNext>Siguiente</button>
                  </div>

                </mat-step>
              </div>

              <div *ngIf="tipoDeJuegoSeleccionado === 'Control de trabajo en equipo'">
                <!-- //// Número de controles /////-->
                <mat-step>
                  <ng-template matStepLabel>
                    <div>Numero de controles</div>
                  </ng-template>

                  <!-- casilla para introducir número de controles -->
                  <mat-form-field>
                    <mat-label>Introduzca el número de controles</mat-label>
                    <input matInput formControlName="NumeroDeControles" placeholder="Escriba el número de controles"
                      requiered (keyup)="GuardarNumeroDeControles()">
                  </mat-form-field>
                  <div class="btnCambiarStep">
                    <button type="button" class="btn Back" matStepperPrevious>Atrás</button>
                    <button type="button" class="btn Next" [disabled]="!tengoNumeroDeControles"
                      matStepperNext>Siguiente</button>
                  </div>


                </mat-step>
                <!-- INFORMACIÓN QUE SE DARÁ AL ALUMNO-->

                <mat-step>
                  <ng-template matStepLabel>
                    <div>Información al alumno</div>
                  </ng-template>
                  <mat-radio-group class="radBtnProf" aria-label="Select an option">
                    <mat-radio-button value="'false'" [checked]="verRespuestasControl === 'false'"
                      (change)="verRespuestasControl = 'false'; tengoModoRespuestas = 'true'"><b>Cada alumno verá solo
                        los puntos que él ha asignado y sus comentarios</b></mat-radio-button>
                    <mat-radio-button value="'true'" [checked]="verRespuestasControl === 'true'"
                      (change)="verRespuestasControl = 'true'; tengoModoRespuestas = 'true'"><b>Los alumnos verán los
                        puntos y comentarios de todos sus compañeros de equipo</b></mat-radio-button>
                  </mat-radio-group>



                  <div class="btnCambiarStep">
                    <button type="button" class="btn Back" matStepperPrevious>Atrás</button>
                    <button [disabled]="!tengoModoRespuestas" type="button" class="btn Next"
                      matStepperNext>Siguiente</button>
                  </div>
                </mat-step>



                <!-- ULTIMO PASO: CREACIÓN DEl JUEGO DE CONTROL DE TRABAJO EN EQUIPO-->
                <mat-step>
                  <ng-template matStepLabel>Fin</ng-template>
                  <span style="font-weight: bold;color:green;"> Has creado ... {{tipoDeJuegoSeleccionado}} </span>
                  <div class="btnCambiarStep">
                    <button type="button" class="btn Back" matStepperPrevious>Atrás</button>
                    <button style="width: 60%" type="button" class="btn Aceptar"
                      (click)="CrearJuegoDeControlDeTrabajoEnEquipo();">Crear
                      juego de control de trabajo en equipo</button>
                  </div>
                </mat-step>

              </div>

              <!-- ////////////////////////////SI ESCOGEMOS EL JUEGO DE TIPO DE PUNTOS ////////////////////////////////-->
              <div *ngIf="tipoDeJuegoSeleccionado === 'Juego De Puntos' && tengoModo">


                <!-- TERCER PASO: ASIGNACIÓN DE PUNTO AL JUEGO -->
                <mat-step>
                  <ng-template matStepLabel>
                    <div>Puntos</div>
                  </ng-template>

                  <label class="LabelStepper" style="font-size: larger; font-weight: bolder;">Selecciona los tipos de
                    puntos</label>
                  <!-- Saltamos al componente de asignación -->
                  <app-asignacion-punto-juego (emisorTiposDePuntos)="RecibeTiposDePuntos ($event)">
                  </app-asignacion-punto-juego>

                  <div class="btnCambiarStep">
                    <button type="button" class="btn Back" matStepperPrevious>Atrás</button>
                    <button [disabled]="puntosDelJuego.length === 0" type="button" class="btn Next"
                      matStepperNext>Siguiente</button>
                  </div>
                </mat-step>


                <!-- CUARTO PASO: CREACIÓN DE NIVELES-->
                <mat-step>
                  <ng-template matStepLabel>
                    <div>Niveles</div>
                  </ng-template>

                  <label class="LabelStepper">Añade los niveles que desees</label>
                  <!-- Activamos el componente para crear nivel. Cada vez que se cree un nivel el componente
                      nos lo remite para que lo guardemos -->
                  <app-crear-nivel (emisorNiveles)="RecibeNivel ($event)">
                  </app-crear-nivel>

                  <div class="btnCambiarStep">
                    <button type="button" class="btn Back" matStepperPrevious>Atrás</button>
                    <button type="button" class="btn Next" matStepperNext>Siguiente</button>
                  </div>

                </mat-step>


                <!-- ULTIMO PASO: CREACIÓN DEl JUEGO DE PUNTOS-->
                <mat-step>
                  <ng-template matStepLabel>Fin</ng-template>
                  <span style="font-weight: bold;color:green;"> Has creado ... {{tipoDeJuegoSeleccionado}} ...
                    {{modoDeJuegoSeleccionado}} </span>
                  <div class="btnCambiarStep">
                    <button type="button" class="btn Back" matStepperPrevious>Atrás</button>
                    <button style="width: 60%" type="button" class="btn Aceptar" (click)="CrearJuegoDePuntos();">Crear
                      juego de puntos</button>
                  </div>
                </mat-step>
              </div>

              <!-- ////////////////////////////SI ESCOGEMOS EL JUEGO DE TIPO DE COLECCIÓN ////////////////////////////////-->
              <div *ngIf="tipoDeJuegoSeleccionado === 'Juego De Colección' && tengoModo">

                <mat-step *ngIf="modoDeJuegoSeleccionado  === 'Equipos'">
                  <ng-template matStepLabel>
                    <div>Asignación</div>
                  </ng-template>
                  <div>
                    <label class="LabelStepper">Selecciona el modo de asignación:</label>
                    <mat-radio-group aria-labelledby="example-radio-group-label" class="radio-group">
                      <mat-radio-button (click)="modoAsignacion = 'Equipo'" class="radio-button" [value]="'Equipo'">
                        <label style="color: black;">Asignacion al equipo</label>
                      </mat-radio-button>
                      <mat-radio-button (click)="modoAsignacion = 'Individual'" class="radio-button"
                        [value]="'Individual'">
                        <label style="color: black;">Asignación individual (los alumnos comparten album con sus
                          compañeros de equipo) </label>
                      </mat-radio-button>
                    </mat-radio-group>

                    <span *ngIf="modoAsignacion" style="font-weight: bold;color:green;"> Has elegido ...
                      {{modoAsignacion}}</span>

                  </div>
                  <div class="btnCambiarStep">
                    <button type="button" class="btn Back" matStepperPrevious>Atrás</button>
                    <button [disabled]="!modoAsignacion" type="button" class="btn Next"
                      matStepperNext>Siguiente</button>
                  </div>
                </mat-step>

                <!-- TERCER PASO: ASIGNACIÓN DE COLECCIÓN AL JUEGO -->
                <mat-step>
                  <ng-template matStepLabel>
                    <div>Colección</div>
                  </ng-template>


                  <label class="LabelStepper" style="font-size: larger; font-weight: bolder;">Selecciona una
                    colección</label>

                  <!-- Nos vamos al componente para asignar la colección -->
                  <app-asignacion-coleccion-juego (emisorColeccion)="RecibeColeccion ($event)">
                  </app-asignacion-coleccion-juego>
                  <span *ngIf="tengoColeccion" style="font-weight: bold;color:green;"> Has elegido ...
                    {{tipoDeJuegoSeleccionado}}: {{coleccionSeleccionada.Nombre}} ... {{modoDeJuegoSeleccionado}}
                  </span>
                  <div class="btnCambiarStep">
                    <button type="button" class="btn Back" matStepperPrevious>Atrás</button>
                    <button type="button" class="btn Next" matStepperNext>Siguiente</button>
                  </div>
                </mat-step>
                <!-- ULTIMO PASO: CREACIÓN DEl JUEGO DE COLECCION-->
                <mat-step>
                  <ng-template matStepLabel>Fin</ng-template>
                  <span *ngIf="tengoColeccion" style="font-weight: bold;color:green;"> Has elegido ...
                    {{tipoDeJuegoSeleccionado}}: {{coleccionSeleccionada.Nombre}} ... {{modoDeJuegoSeleccionado}}
                  </span>
                  <div class="btnCambiarStep">
                    <button type="button" class="btn Back" matStepperPrevious>Atrás</button>
                    <button style="width: 60%" type="button" class="btn Aceptar"
                      (click)="CrearJuegoDeColeccion();">Crear juego de colección</button>
                  </div>
                </mat-step>

              </div>


              <!--/////////////////////////////SI ESCOGEMOS EL JUEGO DE LINGO //////////////////////////////////////////-->

              <div *ngIf="tipoDeJuegoSeleccionado === 'Juego De Lingo'">




                <mat-step>
                  <ng-template matStepLabel>
                    <div>Palabra</div>
                  </ng-template>
                  
                  <!-- casilla para introducir tiempo -->
                  <mat-form-field>
                    <mat-label>Introduzca la palabra secreta: </mat-label>
                    <input matInput formControlName="TiempoDuracion" placeholder="Palabra secreta"
                      requiered>
                  </mat-form-field>

                  <!-- casilla para introducir puntuacion que restamos -->
                  <mat-form-field>
                    <mat-label>Introduzca el número de intentos que tendrá el alumno</mat-label>
                    <input matInput formControlName="PuntuacionIncorrecta" placeholder="Número de intentos"
                      requiered>
                  </mat-form-field>

                  <div class="btnCambiarStep">
                    <button type="button" class="btn Back" matStepperPrevious>Atrás</button>
                    <button [disabled]="!TengoPuntuaciones()" (click)="GuardarPuntuacionMemorama()" type="button"
                      class="btn Next" matStepperNext>Siguiente</button>
                  </div>
                </mat-step>




              </div> <!-- Final -->

              <!-- ////////////////////////////SI ESCOGEMOS EL JUEGO DE TIPO DE MEMORAMA ////////////////////////////////-->

              <div *ngIf="tipoDeJuegoSeleccionado === 'Juego De Memorama' && tengoModo">

                <!-- Aun no se si hare equipos!!!! -->
                <!-- <mat-step *ngIf="modoDeJuegoSeleccionado  === 'Equipos'">
                <ng-template matStepLabel><div>Asignación</div></ng-template>
                <div>
                  <label class = "LabelStepper">Selecciona el modo de asignación:</label>
                  <mat-radio-group aria-labelledby="example-radio-group-label" class="radio-group">
                      <mat-radio-button (click)="modoAsignacion = 'Equipo'" class="radio-button" [value]="'Equipo'" >
                        <label style="color: black;">Asignacion al equipo</label>
                      </mat-radio-button>
                      <mat-radio-button (click)="modoAsignacion = 'Individual'" class="radio-button" [value]="'Individual'">
                        <label style="color: black;">Asignación individual (los alumnos comparten album con sus compañeros de equipo) </label>
                      </mat-radio-button>
                  </mat-radio-group>

                  <span *ngIf = "modoAsignacion" style ="font-weight: bold;color:green;"> Has elegido ... {{modoAsignacion}}</span>

                </div>
                <div class="btnCambiarStep">
                  <button type="button" class="btn Back" matStepperPrevious>Atrás</button>
                  <button [disabled]="!modoAsignacion" type="button" class="btn Next" matStepperNext>Siguiente</button>
                </div>
              </mat-step> -->

                <!-- TERCER PASO: ASIGNACIÓN DE FAMILIA AL JUEGO -->
                <mat-step>
                  <ng-template matStepLabel>
                    <div>Familia</div>
                  </ng-template>


                  <label class="LabelStepper" style="font-size: larger; font-weight: bolder;">Selecciona una
                    familia</label>

                  <!-- Nos vamos al componente para asignar la familia -->
                  <app-asignacion-familia-juego (emisorFamilia)="RecibeFamilia ($event)"></app-asignacion-familia-juego>
                  <span *ngIf="tengoFamilia" style="font-weight: bold;color:green;"> Has elegido ...
                    {{tipoDeJuegoSeleccionado}}: {{familiaSeleccionada.Nombre}} ... {{modoDeJuegoSeleccionado}}
                  </span>
                  <div class="btnCambiarStep">
                    <button type="button" class="btn Back" matStepperPrevious>Atrás</button>
                    <button type="button" class="btn Next" matStepperNext>Siguiente</button>
                  </div>
                </mat-step>

                <!-- DIFICULTAD JUEGO-->
                <mat-step>
                  <ng-template matStepLabel>Dificultad</ng-template>
                  <label class="LabelStepper" style="font-size: larger; font-weight: bolder;">Selecciona una
                    Dificultad:</label>

                  <form action="">
                    <input type="radio" id="radio1" name="dificultad" value="facil" checked> Fácil (4
                    Cartas/Parejas)<br>
                    <input type="radio" id="radio2" name="dificultad" value="medio"> Media (5 Cartas/Parejas)<br>
                    <input type="radio" id="radio3" name="dificultad" value="dificil"> Difícil (6 Cartas/Parejas)
                  </form>

                  <div class="btnCambiarStep">
                    <button type="button" class="btn Back" matStepperPrevious>Atrás</button>
                    <button (click)="RegistraDificultad()" type="button" class="btn Next"
                      matStepperNext>Siguiente</button>
                  </div>

                </mat-step>

                <!-- PUNTOS POR SELECCION DE CARTA -->

                <mat-step>
                  <ng-template matStepLabel>
                    <div>Puntuación</div>
                  </ng-template>
                  <!-- casilla para introducir puntuacion que sumamos -->
                  <mat-form-field>
                    <mat-label>Introduzca los puntos a sumar por respuesta correcta</mat-label>
                    <input matInput formControlName="PuntuacionCorrecta" placeholder="Escriba puntos a sumar" requiered>
                  </mat-form-field>
                  <!-- casilla para introducir puntuacion que restamos -->
                  <mat-form-field>
                    <mat-label>Introduzca los puntos a restar por respuesta incorrecta</mat-label>
                    <input matInput formControlName="PuntuacionIncorrecta" placeholder="Escriba puntos a restar"
                      requiered>
                  </mat-form-field>
                  <!-- casilla para introducir tiempo -->
                  <mat-form-field>
                    <mat-label>Introduzca el tiempo de duración del juego</mat-label>
                    <input matInput formControlName="TiempoDuracion" placeholder="Escriba tiempo límite en segundos"
                      requiered>
                  </mat-form-field>

                  <div class="btnCambiarStep">
                    <button type="button" class="btn Back" matStepperPrevious>Atrás</button>
                    <button [disabled]="!TengoPuntuaciones()" (click)="GuardarPuntuacionMemorama()" type="button"
                      class="btn Next" matStepperNext>Siguiente</button>
                  </div>
                </mat-step>


                <!-- CARTAS A ESCOGER -->
                <mat-step>
                  <ng-template matStepLabel>Seleccion de Cartas</ng-template>
                  <label class="LabelStepper" style="font-size: larger; font-weight: bolder;">Selecciona
                    {{numerocartas}} Cartas:</label>
                  <div class="grid-container">
                    <div (click)="CartaSeleccionada(i)" class="grid-item"
                      *ngFor="let elem of vectorimagen;let i = index">
                      <!-- <div style = "height: 10%"><strong>Juego de Cuentos</strong></div> -->
                      <br>
                      <!-- <div > -->
                      <img width="150" hight="150" id="carta{{i}}" [src]="vectorimagen[i]" />
                      <!-- </div> -->
                    </div>
                  </div>
                  <button type="button" class="btn Back" matStepperPrevious>Atrás</button>
                  <button (click)="RegistraCartas()" type="button" class="btn Next" matStepperNext>Siguiente</button>



                </mat-step>

                <!-- ULTIMO PASO: CREACIÓN DEl JUEGO DE Memorama-->
                <mat-step>
                  <ng-template matStepLabel>Fin</ng-template>
                  <span *ngIf="tengoFamilia" style="font-weight: bold;color:green;"> Has elegido ...
                    {{tipoDeJuegoSeleccionado}}: {{familiaSeleccionada.Nombre}} ... {{modoDeJuegoSeleccionado}}
                  </span>
                  <div class="btnCambiarStep">
                    <button type="button" class="btn Back" matStepperPrevious>Atrás</button>
                    <button style="width: 60%" type="button" class="btn Aceptar" (click)="CrearJuegoDeMemorama();">Crear
                      juego de Memorama</button>
                  </div>
                </mat-step>
              </div>


              <!--/////////////////////// SI ESCOGEMOS EL JUEGO DE TIPO CUESTIONARIO //////////////////////////////////-->
              <div *ngIf="tipoDeJuegoSeleccionado === 'Juego De Cuestionario' && tengoModo">
                <!-- primero elijo la modalidad-->
                <mat-step>
                  <ng-template matStepLabel>
                    <div>Modalidad</div>
                  </ng-template>
                  <div>
                    <label class="LabelStepper">Selecciona la modalidad del juego:</label>

                    <mat-chip-list class="mat-chip-list-stacked">
                      <mat-chip style='width: 300px'
                        *ngFor="let modalidad of seleccionModalidadJuegoCuestionario; let i = index" selected
                        [color]="modalidad.color" selected="{{seleccionModalidadJuegoCuestionario[i].selected}}"
                        (click)="ModalidadDeJuegoSeleccionada(seleccionModalidadJuegoCuestionario[i])"
                        [value]="modalidad.nombre" [selectable]="true">
                        {{modalidad.nombre}}
                      </mat-chip>
                    </mat-chip-list>

                    <span *ngIf="modalidadSeleccionada" style="font-weight: bold;color:green;"> Has elegido ...
                      {{modalidadSeleccionada}}</span>

                  </div>
                  <div class="btnCambiarStep">
                    <button type="button" class="btn Back" matStepperPrevious>Atrás</button>
                    <button [disabled]="!tengoModalidad" type="button" class="btn Next"
                      matStepperNext>Siguiente</button>
                  </div>
                </mat-step>

                <!-- TERCER PASO: ELEGIR CUESTIONARIO -->



                <mat-step>
                  <ng-template matStepLabel>
                    <div>Cuestionario</div>
                  </ng-template>

                  <label class="LabelStepper" style="font-size: larger; font-weight: bolder;">Selecciona el
                    cuestionario</label>


                  <app-asigna-cuestionario (emisorCuestionarioElegido)="RecibeCuestionarioElegido ($event)">
                  </app-asigna-cuestionario>
                  <span *ngIf="tengoCuestionario" style="font-weight: bold;color:green;"> Has elegido ...
                    {{tipoDeJuegoSeleccionado}}: {{cuestionario.Titulo}} ... {{modoDeJuegoSeleccionado}} </span>
                  <div class="btnCambiarStep">
                    <button type="button" class="btn Back" matStepperPrevious>Atrás</button>
                    <button *ngIf="tengoCuestionario" type="button" class="btn Next" matStepperNext>Siguiente</button>
                  </div>
                </mat-step>


                <mat-step *ngIf="modalidadSeleccionada === 'Clásico'">
                  <ng-template matStepLabel>
                    <div>Puntuación</div>
                  </ng-template>
                  <!-- casilla para introducir puntuacion que sumamos -->
                  <mat-form-field>
                    <mat-label>Introduzca los puntos a sumar por respuesta correcta</mat-label>
                    <input matInput formControlName="PuntuacionCorrecta" placeholder="Escriba puntos a sumar" requiered>
                  </mat-form-field>
                  <!-- casilla para introducir puntuacion que restamos -->
                  <mat-form-field>
                    <mat-label>Introduzca los puntos a restar por respuesta incorrecta</mat-label>
                    <input matInput formControlName="PuntuacionIncorrecta" placeholder="Escriba puntos a restar"
                      requiered>
                  </mat-form-field>
                  <div class="btnCambiarStep">
                    <button type="button" class="btn Back" matStepperPrevious>Atrás</button>
                    <button [disabled]="!TengoPuntuaciones()" (click)="GuardarPuntuacion()" type="button"
                      class="btn Next" matStepperNext>Siguiente</button>
                  </div>
                </mat-step>



                <mat-step *ngIf="modalidadSeleccionada === 'Clásico' && modoDeJuegoSeleccionado === 'Individual'">
                  <ng-template matStepLabel>
                    <div>Presentación</div>
                  </ng-template>
                  <div>
                    <label class="LabelStepper">Selecciona un modo de presentacion:</label>
                    <mat-radio-group aria-labelledby="example-radio-group-label" class="radio-group">
                      <mat-radio-button (click)="GuardarModoPresentacion(presentacion)" class="radio-button"
                        *ngFor="let presentacion of seleccionModoPresentacion" [value]="presentacion">
                        <label style="color: black;">{{presentacion}}</label>
                      </mat-radio-button>
                    </mat-radio-group>

                    <span *ngIf="modoPresentacion" style="font-weight: bold;color:green;"> Has elegido ...
                      {{modoPresentacion}}</span>

                  </div>
                  <div class="btnCambiarStep">
                    <button type="button" class="btn Back" matStepperPrevious>Atrás</button>
                    <button [disabled]="!tengoModoPresentacion" type="button" class="btn Next"
                      matStepperNext>Siguiente</button>
                  </div>
                </mat-step>


                <mat-step *ngIf="modalidadSeleccionada === 'Clásico' && modoDeJuegoSeleccionado === 'Equipos'">
                  <ng-template matStepLabel>
                    <div>Forma de puntuación</div>
                  </ng-template>

                  <div class="enFila">

                    <div style="width : 50%">

                      <mat-radio-group class="radBtnProf" aria-label="Select an option">
                        <mat-radio-button value="'false'" [checked]="puntuaLaMedia === false"
                          (change)="puntuaLaMedia = false; tengoModoPresentacion = true"><b>Puntúa el PRIMERO del equipo
                            que conteste</b></mat-radio-button>
                        <mat-radio-button value="'true'" [checked]="puntuaLaMedia === true"
                          (change)="puntuaLaMedia = true; tengoModoPresentacion = false"><b>Puntúa la MEDIA DE TODOS los
                            miembros del equipo</b></mat-radio-button>
                      </mat-radio-group>
                    </div>
                    <div *ngIf="puntuaLaMedia" style="width : 50%">
                      <label class="LabelStepper">Selecciona un modo de presentacion:</label>
                      <mat-radio-group aria-labelledby="example-radio-group-label" class="radio-group">
                        <mat-radio-button (click)="GuardarModoPresentacion(presentacion)" class="radio-button"
                          *ngFor="let presentacion of seleccionModoPresentacion" [value]="presentacion">
                          <label style="color: black;">{{presentacion}}</label>
                        </mat-radio-button>
                      </mat-radio-group>

                    </div>


                  </div>


                  <div class="btnCambiarStep">
                    <button type="button" class="btn Back" matStepperPrevious>Atrás</button>
                    <button [disabled]="!tengoModoPresentacion" type="button" class="btn Next"
                      (click)="GuardarFormaDePuntuacion()" matStepperNext>Siguiente</button>
                  </div>
                </mat-step>

                <mat-step *ngIf="modalidadSeleccionada === 'Kahoot'">
                  <ng-template matStepLabel>
                    <div>Presentación</div>
                  </ng-template>
                  <div>
                    <label class="LabelStepper">Selecciona un modo de presentacion:</label>
                    <mat-radio-group aria-labelledby="example-radio-group-label" class="radio-group">
                      <mat-radio-button (click)="GuardarModoPresentacion(presentacion)" class="radio-button"
                        *ngFor="let presentacion of seleccionModoPresentacionKahoot" [value]="presentacion">
                        <label style="color: black;">{{presentacion}}</label>
                      </mat-radio-button>
                    </mat-radio-group>

                    <span *ngIf="modoPresentacion" style="font-weight: bold;color:green;"> Has elegido ...
                      {{modoPresentacion}}</span>

                  </div>
                  <div class="btnCambiarStep">
                    <button type="button" class="btn Back" matStepperPrevious>Atrás</button>
                    <button [disabled]="!tengoModoPresentacion" type="button" class="btn Next"
                      matStepperNext>Siguiente</button>
                  </div>
                </mat-step>





                <mat-step *ngIf="modalidadSeleccionada === 'Clásico'">
                  <ng-template matStepLabel>
                    <div>Tiempo</div>
                  </ng-template>

                  <mat-form-field>
                    <mat-label>Introduzca el tiempo límite para responder el cuestionario (en segundos)</mat-label>

                    <input matInput formControlName="TiempoLimite" placeholder="Introduzca el tiempo limite" requiered>
                  </mat-form-field>

                  <div class="btnCambiarStep">
                    <button type="button" class="btn Back" matStepperPrevious>Atrás</button>
                    <button type="button" (click)="GuardarTiempoLimite()" class="btn Next"
                      matStepperNext>Siguiente</button>
                  </div>
                </mat-step>



                <mat-step *ngIf="modalidadSeleccionada === 'Kahoot'">
                  <ng-template matStepLabel>
                    <div>Tiempo</div>
                  </ng-template>

                  <mat-form-field>
                    <mat-label>Introduzca el tiempo límite para responder cada pregunta (en segundos)</mat-label>

                    <input matInput formControlName="TiempoLimite" placeholder="Introduzca el tiempo limite" requiered>
                  </mat-form-field>

                  <div class="btnCambiarStep">
                    <button type="button" class="btn Back" matStepperPrevious>Atrás</button>
                    <button type="button" (click)="GuardarTiempoLimite()" class="btn Next"
                      matStepperNext>Siguiente</button>
                  </div>
                </mat-step>


                <!--Ultimo paso, finalizamos-->
                <mat-step>
                  <ng-template matStepLabel>
                    <div>Finalizar</div>
                  </ng-template>

                  <div class="btnCambiarStep">
                    <button type="button" class="btn Back" matStepperPrevious>Atrás</button>
                    <button style="width: 60%" type="button" class="btn Aceptar"
                      (click)="CrearJuegoDeCuestionario()">Crear juego de cuestionario</button>
                  </div>
                </mat-step>
              </div>

              <!-- ////////////////////// SI ESCOGEMOS EL JUEGO DE TIPO DE VOTACION ////////////////////////////////-->

              <div *ngIf="tipoDeJuegoSeleccionado === 'Juego De Votación' && tengoModo">

                <!-- TERCER PASO: SELECTION DE TIPO DE VOTACION -->
                <mat-step>
                  <ng-template matStepLabel>
                    <div>Votación</div>
                  </ng-template>

                  <div class="colorsChips">

                    <label class="LabelStepper">Selecciona el tipo de votación</label>
                    <mat-chip-list class="mat-chip-list-stacked">
                      <div style="width: 70%">
                        <mat-chip style="width: 150px" selected [color]="seleccionTipoDeVotacion[0].color"
                          selected="{{seleccionTipoDeVotacion[0].selected}}"
                          (click)="TipoDeVotacionSeleccionado(seleccionTipoDeVotacion[0])"
                          [value]="seleccionTipoDeVotacion[0].nombre" [selectable]="true">
                          {{seleccionTipoDeVotacion[0].nombre}}
                        </mat-chip>
                        <label>Cada participante <strong style="color:red">reparte puntos entre todos </strong> los
                          demás</label>
                      </div>
                      <br>
                      <div style="width: 70%">
                        <mat-chip style="width: 150px" selected [color]="seleccionTipoDeVotacion[1].color"
                          selected="{{seleccionTipoDeVotacion[1].selected}}"
                          (click)="TipoDeVotacionSeleccionado(seleccionTipoDeVotacion[1])"
                          [value]="seleccionTipoDeVotacion[1].nombre" [selectable]="true">
                          {{seleccionTipoDeVotacion[1].nombre}}
                        </mat-chip>
                        <label>Cada participante <strong style="color:red">valora a cada uno </strong>de los
                          demás</label>
                      </div>
                      <div style="width: 70%">
                        <mat-chip style="width: 150px" selected [color]="seleccionTipoDeVotacion[2].color"
                          selected="{{seleccionTipoDeVotacion[2].selected}}"
                          (click)="TipoDeVotacionSeleccionado(seleccionTipoDeVotacion[2])"
                          [value]="seleccionTipoDeVotacion[2].nombre" [selectable]="true">
                          {{seleccionTipoDeVotacion[2].nombre}}
                        </mat-chip>
                        <label>Cada participante vota <strong style="color:red">sus opciones preferidas
                          </strong></label>
                      </div>
                      <!-- 
                      <mat-chip style = "width: 150px" *ngFor="let tipo of seleccionTipoDeVotacion; let i = index" selected [color]="tipo.color"  selected="{{seleccionTipoDeVotacion[i].selected}}"
                      (click)="TipoDeVotacionSeleccionado(seleccionTipoDeVotacion[i])" [value]="tipo.nombre" [selectable]="true">
                      {{tipo.nombre}}
                      </mat-chip> -->
                    </mat-chip-list>
                    <br>
                    <span style="font-weight: bold;color:green;"> Has elegido ... {{tipoDeJuegoSeleccionado}} ...
                      {{tipoDeVotacionSeleccionado}}</span>

                  </div>
                  <div class="btnCambiarStep">
                    <button type="button" class="btn Back" matStepperPrevious>Atrás</button>
                    <button [disabled]="!tengoTipoDeVotacion" type="button" class="btn Next"
                      matStepperNext>Siguiente</button>
                  </div>
                </mat-step>
                <div *ngIf="tipoDeVotacionSeleccionado === 'Uno A Todos'">
                  <!-- Quién vota -->
                  <mat-step>
                    <ng-template matStepLabel>
                      <div>Quién</div>
                    </ng-template>
                    <form action="">
                      <label class="LabelStepper">¿Pueden votarse a si mismos?</label>
                      <input type="radio" name="autovotacion" checked> Los participantes pueden votarse a si mismos<br>
                      <input type="radio" name="autovotacion"> Los participantes NO pueden votarse a si mismos<br>
                    </form>
                    <br>
                    <br>
                    <form *ngIf="modoDeJuegoSeleccionado === 'Equipos'">
                      <label class="LabelStepper">¿Quién vota?</label>
                      <input type="radio" name="quien" checked> Votan los equipos (un miembro de cada equipo)<br>
                      <input type="radio" name="quien"> Vota cada uno de los alumnos<br>
                    </form>
                    <div class="btnCambiarStep">
                      <button type="button" class="btn Back" matStepperPrevious>Atrás</button>
                      <button class="btn Next" (click)="GuardarQuienVota()" matStepperNext>Siguiente</button>
                    </div>

                  </mat-step>
                  <!-- Especificar modo de reparto de los puntos -->
                  <mat-step>
                    <ng-template matStepLabel>
                      <div>Modo de reparto</div>
                    </ng-template>

                    <div class="colorsChips">

                      <label class="LabelStepper">Selecciona el modo de reparto de los puntos</label>
                      <mat-chip-list class="mat-chip-list-stacked">
                        <div class="enFila" *ngFor="let modo of seleccionModoReparto; let i = index" style="width: 60%">
                          <!-- <mat-chip style = "width: 250px" *ngFor="let modo of seleccionModoReparto; let i = index" selected [color]="modo.color"  selected="{{seleccionModoReparto[i].selected}}" -->
                          <mat-chip style="width: 250px" selected [color]="modo.color"
                            selected="{{seleccionModoReparto[i].selected}}"
                            (click)="ModoDeRepartoSeleccionado(seleccionModoReparto[i])" [value]="modo.nombre"
                            [selectable]="true">
                            {{modo.nombre}}
                          </mat-chip>
                          <div *ngIf="(modoDeRepartoSeleccionado === 'Reparto libre') && (i===1)">
                            <span style="font-weight: bold;">Puntos a repartir: </span>
                            <mat-slider thumbLabel (change)="GuardaValor($event)" tickInterval="1" min="1" max="100">
                            </mat-slider>
                          </div>
                        </div>
                      </mat-chip-list>

                      <span *ngIf="(modoDeRepartoSeleccionado !== 'Reparto libre')"
                        style="font-weight: bold;color:green;"> Has elegido ... {{tipoDeJuegoSeleccionado}} ...
                        {{tipoDeVotacionSeleccionado}} ... {{modoDeRepartoSeleccionado}}</span>
                      <span *ngIf="(modoDeRepartoSeleccionado === 'Reparto libre')"
                        style="font-weight: bold;color:green;"> Has elegido ... {{tipoDeJuegoSeleccionado}} ...
                        {{tipoDeVotacionSeleccionado}} ... {{modoDeRepartoSeleccionado}} de {{puntosARepartir}}
                        puntos</span>

                    </div>
                    <div class="btnCambiarStep">
                      <button type="button" class="btn Back" matStepperPrevious>Atrás</button>
                      <button *ngIf="(modoDeRepartoSeleccionado !== 'Reparto libre')" [disabled]="!tengoModoReparto"
                        type="button" class="btn Next" matStepperNext>Siguiente</button>
                      <button *ngIf="(modoDeRepartoSeleccionado === 'Reparto libre')"
                        [disabled]="!tengoModoReparto && puntosARepartir > 0" type="button" class="btn Next"
                        matStepperNext>Siguiente</button>
                    </div>
                  </mat-step>
                  <!--CUARTO PASO : INTRODUCIR PUNTUACIONES-->
                  <mat-step *ngIf="modoDeRepartoSeleccionado === 'Reparto fijo según posición'">
                    <ng-template matStepLabel>
                      <div>Puntuaciones</div>
                    </ng-template>

                    <div class="contenedor">
                      <div class="enColumna">
                        <div class="enFila" style="width: 80%">
                          <div style="margin-top: 15px;">
                            <span>Introduzca el número de puntos y seleccione la posición a la que desea asignarlos:
                            </span>
                            <mat-form-field>
                              <mat-label>Introduzca pos puntos deseados</mat-label>
                              <input matInput formControlName="NuevaPuntuacion" placeholder="Escribe los puntos"
                                requiered (keyup)="GuardarNuevaPuntuacion()">
                            </mat-form-field>
                          </div>
                          <div style="margin-top: 10px">
                            <button type="button" class="btn Aceptar" [disabled]="!Preparado()"
                              (click)=AnadirPuntos()>Establecer Puntuación</button>
                          </div>
                        </div>

                        <form style="width: 100%">
                          <table style="width: 100%" align="center" mat-table [dataSource]="dataSource"
                            class="mat-elevation-z8">
                            <ng-container matColumnDef="select">
                              <th mat-header-cell *matHeaderCellDef class="tituloColumnaTabla">
                                <mat-checkbox (change)="$event ? MasterToggle() : null;"
                                  [checked]="selection.hasValue() && IsAllSelected()"
                                  [indeterminate]="selection.hasValue() && !IsAllSelected()">
                                </mat-checkbox>
                              </th>
                              <td mat-cell *matCellDef="let row">
                                <mat-checkbox (click)="$event.stopPropagation()"
                                  (change)="$event ? selection.toggle(row) : null;"
                                  [checked]="selection.isSelected(row)">

                                </mat-checkbox>

                              </td>
                            </ng-container>

                            <!-- Posicion Column -->
                            <ng-container matColumnDef="Posicion">
                              <th mat-header-cell *matHeaderCellDef class="tituloColumnaTabla"> Posición </th>
                              <td mat-cell style="text-align: center" *matCellDef="let tablaPuntuacion">
                                {{tablaPuntuacion.Posicion}} </td>
                            </ng-container>

                            <!-- Puntos Column -->
                            <ng-container matColumnDef="Puntos">
                              <th mat-header-cell *matHeaderCellDef class="tituloColumnaTabla"> Puntos </th>
                              <td mat-cell *matCellDef="let tablaPuntuacion; "> {{tablaPuntuacion.Puntuacion}} </td>
                            </ng-container>



                            <tr mat-header-row *matHeaderRowDef="displayedColumnsTablaPuntuacion"></tr>
                            <tr mat-row *matRowDef="let row; columns: displayedColumnsTablaPuntuacion;"></tr>

                          </table>
                        </form>

                        <div style="margin-top: 10px">
                          <button type="button" class="btn Agregar" (click)=AnadirFila()>Añadir Fila<i
                              class="material-icons">
                              add</i></button>
                          <button type="button" class="btn Eliminar" (click)=EliminarFila()>Eliminar Fila<i
                              class="material-icons">
                              delete</i></button>
                        </div>

                      </div>
                    </div>

                    <div class="btnCambiarStep">
                      <button type="button" class="btn Back" matStepperPrevious>Atrás</button>
                      <button type="button" class="btn Next" matStepperNext>Siguiente</button>

                    </div>
                  </mat-step>

                  <!-- ULTIMO PASO: CREAR EL JUEGO DE VOTACION UNO A TODOS -->
                  <mat-step>
                    <ng-template matStepLabel>
                      <div>Finalizar</div>
                    </ng-template>
                    <div class="btnCambiarStep">
                      <button type="button" class="btn Back" matStepperPrevious>Atrás</button>
                      <button style="width: 60%" type="button" class="btn Aceptar"
                        (click)="CrearJuegoDeVotacionUnoATodos()">Crear juego de votación Uno A Todos</button>
                    </div>
                  </mat-step>
                </div>
                <div *ngIf="tipoDeVotacionSeleccionado === 'Todos A Uno'">
                  <mat-step>
                    <ng-template matStepLabel>
                      <div>Conceptos y pesos</div>
                    </ng-template>



                    <div class="contenedor">
                      <div class="enColumna">
                        <div class="enFila" style="width: 130%">
                          <!-- <table><tr>
                          <td><mat-form-field style = 'width: 100%;'>
                            <mat-label>Concepto</mat-label>
                            <input matInput required formControlName="NombreDelConcepto">
                          </mat-form-field></td>
                          <td><mat-form-field style = 'width: 30%; text-align: right;'>
                            <mat-label>Peso en %</mat-label>
                            <input matInput required formControlName="PesoDelConcepto" name="Peso">
                          </mat-form-field></td>
                        </tr></table> -->
                          <mat-form-field style='width: 40%; margin-right: 5%;'>
                            <mat-label>Concepto</mat-label>
                            <input matInput required formControlName="NombreDelConcepto">
                          </mat-form-field>
                          <br>
                          <mat-form-field style='width: 10%; text-align: right; margin-right: 5%;'>
                            <mat-label>Peso en %</mat-label>
                            <input matInput required formControlName="PesoDelConcepto" name="Peso">
                          </mat-form-field>

                          <button type="button" class="btn Agregar" (click)="PonConcepto()">Añade concepto</button>

                          <button type="button" class="btn Aceptar" (click)="AsignarConceptos()"> Asignar conceptos
                          </button>
                        </div>

                        <h2>Lista de conceptos</h2>
                        <form style="width: 100%">

                          <table style="width: 100%" align="left" mat-table [dataSource]="dataSourceConceptos"
                            class="mat-elevation-z8">

                            <ng-container matColumnDef="nombreConcepto" style="width: 60%">
                              <th mat-header-cell *matHeaderCellDef class="tituloColumnaTabla"> Nombre del Concepto
                              </th>
                              <td mat-cell *matCellDef="let concepto"> {{concepto.nombre}} </td>
                              <td mat-footer-cell *matFooterCellDef></td>
                            </ng-container>

                            <ng-container matColumnDef="pesoConcepto" style="width: 20%; text-align: right;">
                              <th mat-header-cell *matHeaderCellDef class="tituloColumnaTabla"> Peso en % </th>
                              <td mat-cell *matCellDef="let concepto "> {{concepto.peso}} </td>
                              <td mat-footer-cell *matFooterCellDef> Total: {{totalPesos}}</td>
                            </ng-container>

                            <ng-container matColumnDef=" " style="width: 20%; text-align: right;">
                              <th mat-header-cell *matHeaderCellDef class="tituloColumnaTabla"></th>
                              <td mat-cell *matCellDef="let concepto">
                                <button (click)="BorraConcepto(concepto.nombre)" mat-icon-button>
                                  <i class="material-icons red md-36">delete</i>
                                </button>
                              </td>
                              <td mat-footer-cell *matFooterCellDef></td>
                            </ng-container>


                            <tr mat-header-row *matHeaderRowDef="displayedColumnsConceptos"></tr>
                            <tr mat-row *matRowDef="let row; columns: displayedColumnsConceptos;"></tr>
                            <mat-footer-row class="sticky-footer"
                              *matFooterRowDef="['nombreConcepto', 'pesoConcepto', ' ']"></mat-footer-row>


                          </table>
                        </form>


                      </div>
                    </div>

                    <div *ngIf="conceptosAsignados" class="btnCambiarStep">
                      <button type="button" class="btn Back" matStepperPrevious>Atrás</button>
                      <button type="button" class="btn Next" matStepperNext>Siguiente</button>
                    </div>

                  </mat-step>
                  <!-- ULTIMO PASO: CREAR EL JUEGO DE VOTACION TODOS A UNO -->
                  <mat-step>
                    <ng-template matStepLabel>
                      <div>Finalizar</div>
                    </ng-template>

                    <div class="btnCambiarStep">
                      <button type="button" class="btn Back" matStepperPrevious>Atrás</button>
                      <button style="width: 60%" type="button" class="btn Aceptar"
                        (click)="CrearJuegoDeVotacionTodosAUno()">Crear juego de votación Todos A Uno</button>
                    </div>
                  </mat-step>
                </div>
                <div *ngIf="tipoDeVotacionSeleccionado === 'Votar opciones'">
                  <!--/////////////////// INTRODUCIR OPCIONES A VOTAR //////////////////////////-->
                  <mat-step>
                    <ng-template matStepLabel>
                      <div>Opciones</div>
                    </ng-template>
                    <div class="contenedor">
                      <div class="enColumna">
                        <div class="enFila" style="width: 130%">
                          <mat-form-field style='width: 40%; margin-right: 5%;'>
                            <mat-label>Opción</mat-label>
                            <input matInput required formControlName="Opcion">
                          </mat-form-field>
                          <br>

                          <button type="button" class="btn Agregar" (click)="PonOpcion()">Añade opción</button>

                          <button type="button" class="btn Aceptar" (click)="AsignarOpciones()"> Asignar opciones
                          </button>
                        </div>

                        <h2>Lista de opciones</h2>
                        <form style="width: 100%">

                          <table style="width: 100%" align="left" mat-table [dataSource]="dataSourceOpciones"
                            class="mat-elevation-z8">

                            <ng-container matColumnDef="opcion" style="width: 40%">
                              <th mat-header-cell *matHeaderCellDef class="tituloColumnaTabla"> Opción </th>
                              <td mat-cell *matCellDef="let opcion"> {{opcion}} </td>
                              <td mat-footer-cell *matFooterCellDef></td>
                            </ng-container>

                            <ng-container matColumnDef="iconos">
                              <th mat-header-cell *matHeaderCellDef class="tituloColumnaTabla"></th>
                              <td mat-cell *matCellDef="let opcion">
                                <button (click)="BorraOpcion(opcion)" mat-icon-button>
                                  <i class="material-icons red md-36">delete</i>
                                </button>
                              </td>
                              <td mat-footer-cell *matFooterCellDef></td>
                            </ng-container>


                            <tr mat-header-row *matHeaderRowDef="displayedColumnsOpciones"></tr>
                            <tr mat-row *matRowDef="let row; columns: displayedColumnsOpciones;"></tr>

                          </table>
                        </form>


                      </div>
                    </div>

                    <div *ngIf="opcionesAsignadas" class="btnCambiarStep">
                      <button type="button" class="btn Back" matStepperPrevious>Atrás</button>
                      <button type="button" class="btn Next" matStepperNext>Siguiente</button>
                    </div>

                  </mat-step>
                  <!-- /////////////////// MODO DE REPARTO DE LOS PUNTOS ///////////////////////////// -->

                  <mat-step>
                    <ng-template matStepLabel>
                      <div>Modo de reparto</div>
                    </ng-template>

                    <div class="colorsChips">

                      <label class="LabelStepper">Selecciona el modo de reparto de los puntos</label>
                      <mat-chip-list class="mat-chip-list-stacked">
                        <div class="enFila" *ngFor="let modo of seleccionModoReparto; let i = index" style="width: 60%">
                          <!-- <mat-chip style = "width: 250px" *ngFor="let modo of seleccionModoReparto; let i = index" selected [color]="modo.color"  selected="{{seleccionModoReparto[i].selected}}" -->
                          <mat-chip style="width: 250px" selected [color]="modo.color"
                            selected="{{seleccionModoReparto[i].selected}}"
                            (click)="ModoDeRepartoSeleccionado(seleccionModoReparto[i])" [value]="modo.nombre"
                            [selectable]="true">
                            {{modo.nombre}}
                          </mat-chip>
                          <div *ngIf="(modoDeRepartoSeleccionado === 'Reparto libre') && (i===1)">
                            <span style="font-weight: bold;">Puntos a repartir: </span>
                            <mat-slider thumbLabel (change)="GuardaValor($event)" tickInterval="1" min="1" max="100">
                            </mat-slider>
                          </div>
                        </div>
                      </mat-chip-list>

                      <span *ngIf="(modoDeRepartoSeleccionado !== 'Reparto libre')"
                        style="font-weight: bold;color:green;"> Has elegido ... {{tipoDeJuegoSeleccionado}} ...
                        {{tipoDeVotacionSeleccionado}} ... {{modoDeRepartoSeleccionado}}</span>
                      <span *ngIf="(modoDeRepartoSeleccionado === 'Reparto libre')"
                        style="font-weight: bold;color:green;"> Has elegido ... {{tipoDeJuegoSeleccionado}} ...
                        {{tipoDeVotacionSeleccionado}} ... {{modoDeRepartoSeleccionado}} de {{puntosARepartir}}
                        puntos</span>

                    </div>
                    <div class="btnCambiarStep">
                      <button type="button" class="btn Back" matStepperPrevious>Atrás</button>
                      <button *ngIf="(modoDeRepartoSeleccionado !== 'Reparto libre')" [disabled]="!tengoModoReparto"
                        type="button" class="btn Next" matStepperNext>Siguiente</button>
                      <button *ngIf="(modoDeRepartoSeleccionado === 'Reparto libre')"
                        [disabled]="!tengoModoReparto && puntosARepartir > 0" type="button" class="btn Next"
                        matStepperNext>Siguiente</button>
                    </div>
                  </mat-step>

                  <!--INTRODUCIR PUNTUACIONES-->
                  <mat-step *ngIf="modoDeRepartoSeleccionado === 'Reparto fijo según posición'">
                    <ng-template matStepLabel>
                      <div>Puntuaciones</div>
                    </ng-template>

                    <div class="contenedor">
                      <div class="enColumna">
                        <div class="enFila" style="width: 80%">
                          <div style="margin-top: 15px;">
                            <span>Introduzca el número de puntos y seleccione la posición a la que desea asignarlos:
                            </span>
                            <mat-form-field>
                              <mat-label>Introduzca pos puntos deseados</mat-label>
                              <input matInput formControlName="NuevaPuntuacion" placeholder="Escribe los puntos"
                                requiered (keyup)="GuardarNuevaPuntuacion()">
                            </mat-form-field>
                          </div>
                          <div style="margin-top: 10px">
                            <button type="button" class="btn Aceptar" [disabled]="!Preparado()"
                              (click)=AnadirPuntos()>Establecer Puntuación</button>
                          </div>
                        </div>

                        <form style="width: 100%">
                          <table style="width: 100%" align="center" mat-table [dataSource]="dataSource"
                            class="mat-elevation-z8">
                            <ng-container matColumnDef="select">
                              <th mat-header-cell *matHeaderCellDef class="tituloColumnaTabla">
                                <mat-checkbox (change)="$event ? MasterToggle() : null;"
                                  [checked]="selection.hasValue() && IsAllSelected()"
                                  [indeterminate]="selection.hasValue() && !IsAllSelected()">
                                </mat-checkbox>
                              </th>
                              <td mat-cell *matCellDef="let row">
                                <mat-checkbox (click)="$event.stopPropagation()"
                                  (change)="$event ? selection.toggle(row) : null;"
                                  [checked]="selection.isSelected(row)">

                                </mat-checkbox>

                              </td>
                            </ng-container>

                            <!-- Posicion Column -->
                            <ng-container matColumnDef="Posicion">
                              <th mat-header-cell *matHeaderCellDef class="tituloColumnaTabla"> Posición </th>
                              <td mat-cell style="text-align: center" *matCellDef="let tablaPuntuacion">
                                {{tablaPuntuacion.Posicion}} </td>
                            </ng-container>

                            <!-- Puntos Column -->
                            <ng-container matColumnDef="Puntos">
                              <th mat-header-cell *matHeaderCellDef class="tituloColumnaTabla"> Puntos </th>
                              <td mat-cell *matCellDef="let tablaPuntuacion; "> {{tablaPuntuacion.Puntuacion}} </td>
                            </ng-container>



                            <tr mat-header-row *matHeaderRowDef="displayedColumnsTablaPuntuacion"></tr>
                            <tr mat-row *matRowDef="let row; columns: displayedColumnsTablaPuntuacion;"></tr>

                          </table>
                        </form>

                        <div style="margin-top: 10px">
                          <button type="button" class="btn Agregar" (click)=AnadirFila()>Añadir Fila<i
                              class="material-icons">
                              add</i></button>
                          <button type="button" class="btn Eliminar" (click)=EliminarFila()>Eliminar Fila<i
                              class="material-icons">
                              delete</i></button>
                        </div>

                      </div>
                    </div>

                    <div class="btnCambiarStep">
                      <button type="button" class="btn Back" matStepperPrevious>Atrás</button>
                      <button type="button" class="btn Next" matStepperNext>Siguiente</button>

                    </div>
                  </mat-step>
                  <!-- ULTIMO PASO: CREAR EL JUEGO  -->
                  <mat-step>
                    <ng-template matStepLabel>
                      <div>Finalizar</div>
                    </ng-template>

                    <div class="btnCambiarStep">
                      <button type="button" class="btn Back" matStepperPrevious>Atrás</button>
                      <button style="width: 60%" type="button" class="btn Aceptar"
                        (click)="CrearJuegoDeVotacionAOpciones()">Crear juego de votación a opciones</button>
                    </div>
                  </mat-step>

                </div>

              </div>

              <!-- ////////////////////// SI ESCOGEMOS EL JUEGO DE TIPO DE COMPETICIÓN ////////////////////////////////-->

              <div *ngIf="tipoDeJuegoSeleccionado === 'Juego De Competición' && tengoModo">

                <!-- TERCER PASO: SELECTION DE TIPO DE COMPETICION -->

                <mat-step>
                  <ng-template matStepLabel>
                    <div>Competición</div>
                  </ng-template>

                  <div class="colorsChips">

                    <label class="LabelStepper">Selecciona un tipo de competición para el juego:</label>
                    <mat-chip-list class="mat-chip-list-stacked">
                      <mat-chip *ngFor="let tipo of seleccionTipoDeCompeticion; let i = index" selected
                        [color]="tipo.color" selected="{{seleccionTipoDeCompeticion[i].selected}}"
                        (click)="TipoDeCompeticionSeleccionado(seleccionTipoDeCompeticion[i])" [value]="tipo.nombre"
                        [selectable]="true">
                        {{tipo.nombre}}
                      </mat-chip>
                    </mat-chip-list>
                    <span style="font-weight: bold;color:green;"> Has elegido ... {{tipoDeJuegoSeleccionado}} ...
                      {{tipoDeCompeticionSeleccionado}}</span>

                  </div>
                  <div class="btnCambiarStep">
                    <button type="button" class="btn Back" matStepperPrevious>Atrás</button>
                    <button [disabled]="!tengoTipoDeCompeticion" type="button" class="btn Next"
                      matStepperNext>Siguiente</button>
                  </div>
                </mat-step>
                <!-- CUARTO PASO si es liga o fórmula uno: NUMERO DE JORNADAS-->
                <div
                  *ngIf="tipoDeCompeticionSeleccionado === 'Liga' || tipoDeCompeticionSeleccionado === 'Fórmula Uno'">
                  <mat-step>
                    <ng-template matStepLabel>
                      <div>Jornadas</div>
                    </ng-template>

                    <!-- casilla para introducir jornadas -->
                    <mat-form-field>
                      <mat-label>Introduzca el número de jornadas</mat-label>
                      <input matInput formControlName="NumeroDeJornadas" placeholder="Escriba el número de jornadas"
                        requiered (keyup)="GuardarNumeroDeJornadas()">
                    </mat-form-field>
                    <div class="btnCambiarStep">
                      <button type="button" class="btn Back" matStepperPrevious>Atrás</button>
                      <button type="button" class="btn Next" [disabled]="!tengoNumeroDeJornadas"
                        matStepperNext>Siguiente</button>
                    </div>


                  </mat-step>
                </div>
                <!--Ultimo paso, en el caso de una liga: finalizamos-->
                <div *ngIf="tipoDeCompeticionSeleccionado === 'Liga'">
                  <mat-step>
                    <ng-template matStepLabel>
                      <div>Finalizar</div>
                    </ng-template>

                    <div class="btnCambiarStep">
                      <button type="button" class="btn Back" matStepperPrevious>Atrás</button>
                      <button style="width: 60%" type="button" class="btn Aceptar"
                        (click)="CrearJuegoDeCompeticionLiga()">Crear juego de competicion tipo liga</button>
                    </div>
                  </mat-step>
                </div>


                <div *ngIf="tipoDeCompeticionSeleccionado === 'Fórmula Uno'">
                  <!-- QUINTO PASO PASO PARA FORMULA UNO: INTRODUCIR PUNTUACION DE LAS JORNADAS-->
                  <mat-step>
                    <ng-template matStepLabel>
                      <div>Puntuación</div>
                    </ng-template>

                    <div class="contenedor">
                      <div class="enColumna">
                        <div class="enFila" style="width: 80%">
                          <div style="margin-top: 15px;">
                            <span>Introduzca el número de puntos y seleccione la posición a la que desea asignarlos:
                            </span>
                            <mat-form-field>
                              <mat-label>Introduzca pos Puntos deseados</mat-label>
                              <input matInput formControlName="NuevaPuntuacion" placeholder="Escribe los puntos"
                                requiered (keyup)="GuardarNuevaPuntuacion()">
                            </mat-form-field>
                          </div>
                          <div style="margin-top: 10px">
                            <button type="button" class="btn Aceptar" [disabled]="!Preparado()"
                              (click)=AnadirPuntos()>Establecer Puntuación</button>
                          </div>
                        </div>

                        <form style="width: 100%">
                          <table style="width: 100%" align="center" mat-table [dataSource]="dataSource"
                            class="mat-elevation-z8">
                            <ng-container matColumnDef="select">
                              <th mat-header-cell *matHeaderCellDef class="tituloColumnaTabla">
                                <mat-checkbox (change)="$event ? MasterToggle() : null;"
                                  [checked]="selection.hasValue() && IsAllSelected()"
                                  [indeterminate]="selection.hasValue() && !IsAllSelected()">
                                </mat-checkbox>
                              </th>
                              <td mat-cell *matCellDef="let row">
                                <mat-checkbox (click)="$event.stopPropagation()"
                                  (change)="$event ? selection.toggle(row) : null;"
                                  [checked]="selection.isSelected(row)">

                                </mat-checkbox>

                              </td>
                            </ng-container>

                            <!-- Posicion Column -->
                            <ng-container matColumnDef="Posicion">
                              <th mat-header-cell *matHeaderCellDef class="tituloColumnaTabla"> Posición </th>
                              <td mat-cell style="text-align: center" *matCellDef="let tablaPuntuacion">
                                {{tablaPuntuacion.Posicion}} </td>
                            </ng-container>

                            <!-- Puntos Column -->
                            <ng-container matColumnDef="Puntos">
                              <th mat-header-cell *matHeaderCellDef class="tituloColumnaTabla"> Puntos </th>
                              <td mat-cell *matCellDef="let tablaPuntuacion; "> {{tablaPuntuacion.Puntuacion}} </td>
                            </ng-container>



                            <tr mat-header-row *matHeaderRowDef="displayedColumnsTablaPuntuacion"></tr>
                            <tr mat-row *matRowDef="let row; columns: displayedColumnsTablaPuntuacion;"></tr>

                          </table>
                        </form>

                        <div style="margin-top: 10px">
                          <button type="button" class="btn Agregar" (click)=AnadirFila()>Añadir Fila<i
                              class="material-icons">
                              add</i></button>
                          <button type="button" class="btn Eliminar" (click)=EliminarFila()>Eliminar Fila<i
                              class="material-icons">
                              delete</i></button>
                        </div>

                      </div>
                    </div>

                    <div class="btnCambiarStep">
                      <button type="button" class="btn Back" matStepperPrevious>Atrás</button>
                      <button type="button" class="btn Next" matStepperNext>Siguiente</button>

                    </div>
                  </mat-step>

                  <!-- ULTIMO PASO: CREAR EL JUEGO DE FORMULA 1 -->
                  <mat-step>
                    <ng-template matStepLabel>
                      <div>Finalizar</div>
                    </ng-template>

                    <div class="btnCambiarStep">
                      <button type="button" class="btn Back" matStepperPrevious>Atrás</button>
                      <button style="width: 60%" type="button" class="btn Aceptar"
                        (click)="CrearJuegoDeCompeticionFormulaUno()">Crear juego de competicion tipo fórmula
                        uno</button>
                    </div>
                  </mat-step>
                </div>

                <!--Cuarto paso, en el caso torneo: modelo de torneo-->

                <div *ngIf="tipoDeCompeticionSeleccionado === 'Torneo'">
                  <mat-step>
                    <ng-template matStepLabel>
                      <div>Modelo Torneo</div>
                    </ng-template>

                    <div class="colorsChips">

                      <label class="LabelStepper">Selecciona un modelo de torneo para el juego:</label>
                      <mat-chip-list class="mat-chip-list-stacked">
                        <mat-chip style="width: 150px" *ngFor="let tipo of seleccionModeloTorneo; let i = index"
                          selected [color]="tipo.color" selected="{{seleccionModeloTorneo[i].selected}}"
                          (click)="TipoDeTorneoSeleccionado(seleccionModeloTorneo[i])" [value]="tipo.nombre"
                          [selectable]="true">
                          {{tipo.nombre}}
                        </mat-chip>
                      </mat-chip-list>
                      <span style="font-weight: bold;color:green;"> Has elegido ... {{tipoDeJuegoSeleccionado}} ...
                        {{tipoDeCompeticionSeleccionado}} ... {{tipoDeTorneoSeleccionado}}</span>
                    </div>
                    <div class="btnCambiarStep">
                      <button type="button" class="btn Back" matStepperPrevious>Atrás</button>
                      <button type="button" class="btn Aceptar" (click)="CrearCuadroTorneo()"
                        matStepperNext>Siguiente</button>
                    </div>
                  </mat-step>

                  <!-- QUINTO PASO en torneo: Emparejamientos -->

                  <mat-step>
                    <ng-template matStepLabel>
                      <div>Emparejamientos Torneo</div>
                    </ng-template>

                    <!-- <div class = "enColumna"> -->

                    <label class="LabelStepper">Ordena (arrastrando con el ratón) los participantes para organizar el
                      cuadro del torneo. Los participantes con el mismo color se enfrentarán en la primera jornada.
                      Recuerda que los fantasmas no pueden enfrentarse entre ellos</label>
                    <div cdkDropList (cdkDropListDropped)="dropParticipantes($event)">
                      <div style="padding-left: 20px;" *ngFor="let participante of ParticipantesTorneo; let i = index"
                        cdkDrag>
                        <span *ngIf="participante!==undefined">
                          <span *ngIf=" modoDeJuegoSeleccionado === 'Individual'">
                            <p *ngIf="EsEmparejamientoPar(i)" style="color: red"> {{participante.nombre}}
                              {{participante.PrimerApellido}} {{participante.SegundoApellido}}</p>
                            <p *ngIf="!EsEmparejamientoPar(i)" style="color:black">{{participante.nombre}}
                              {{participante.PrimerApellido}} {{participante.SegundoApellido}}</p>
                            <!-- <mat-divider  *ngIf = "i % 2 !== 0" ></mat-divider>  -->
                          </span>
                          <span *ngIf=" modoDeJuegoSeleccionado === 'Equipos'">
                            <p *ngIf="EsEmparejamientoPar(i)" style="color: red"> {{participante.Nombre}}</p>
                            <p *ngIf="!EsEmparejamientoPar(i)" style="color:black">{{participante.Nombre}}</p>
                          </span>
                        </span>
                        <span *ngIf="participante==undefined">
                          <p *ngIf="EsEmparejamientoPar(i)" style="color: red"> Fantasma</p>
                          <p *ngIf="!EsEmparejamientoPar(i)" style="color:black">Fantasma</p>
                        </span>
                      </div>
                    </div>
                    <!-- </div> -->
                    <div *ngIf="ParticipantesTorneo" class="btnCambiarStep">
                      <button type="button" class="btn Back" matStepperPrevious>Atrás</button>
                      <button *ngIf="!HayEnfrentamientoEntreFantasmas()" type="button" class="btn Aceptar"
                        matStepperNext>Siguiente></button>
                      <button [disabled]="true" *ngIf="HayEnfrentamientoEntreFantasmas()" type="button"
                        class="btn Aceptar" matStepperNext>Enfrentamiento entre fantasmas</button>
                    </div>
                  </mat-step>
                  <!-- Ultimo PASO en torneo: Finalizar juego torneo -->
                  <mat-step>
                    <ng-template matStepLabel>
                      <div>Finalizar</div>
                    </ng-template>

                    <div class="btnCambiarStep">
                      <button type="button" class="btn Back" matStepperPrevious>Atrás</button>
                      <button style="width: 60%" type="button" class="btn Aceptar"
                        (click)="CrearJuegoDeCompeticionTorneo()">Crear juego de competición Torneo</button>
                    </div>
                  </mat-step>
                </div>

                <!-- <mat-step>
                      <ng-template matStepLabel>Finalizar</ng-template>
                      <span *ngIf="tipoDeJuegoSeleccionado === 'Juego De Competición'" style ="font-weight: bold;color:green;"> Has creado ... {{tipoDeJuegoSeleccionado}}... {{tipoJuegoCompeticionSeleccionado}} ... {{modoDeJuegoSeleccionado}} </span>
                            <div class="btnCambiarStep">
                              <div *ngIf="tipoJuegoCompeticionSeleccionado === 'Liga'">
                                <button type="button" class="btn Aceptar" (click) = "Finalizar();">Finalizar</button>
                                <button type="button" class="btn Aceptar" (click) = Finalizar();  routerLink = "juegoSeleccionadoActivo">Finalizar y Editar</button>
                              </div>
                              <div *ngIf="tipoJuegoCompeticionSeleccionado !== 'Liga'">
                                <button type="button" class="btn Aceptar" (click) = "Finalizar();">Finalizar</button>
                              </div>
                            </div>
              </mat-step> -->
              </div>

              <!-- ////////////////////// SI ESCOGEMOS JUEGO DE AVATAR ////////////////////////////////-->
              <div *ngIf="tipoDeJuegoSeleccionado === 'Juego De Avatar' && tengoModo">


                <!-- TERCER PASO: SELECCIONAR FAMILIAS DE AVATARES -->
                <mat-step>
                  <ng-template matStepLabel>
                    <div>Familias</div>
                  </ng-template>

                  <label class="LabelStepper" style="font-size: larger; font-weight: bolder;">Selecciona las familias de
                    avatares para el juego</label>

                  <!-- Nos vamos al componente para asignar la colección -->
                  <app-asignar-familias-juego-avatares (emisorFamiliasElegidas)="RecibeFamiliasElegidas ($event)">
                  </app-asignar-familias-juego-avatares>
                  <div class="btnCambiarStep">
                    <button type="button" class="btn Back" matStepperPrevious>Atrás</button>
                    <button *ngIf="tengoFamilias" type="button" class="btn Next" matStepperNext>Siguiente</button>
                  </div>

                </mat-step>

                <!-- CUARTO PASO: ESTABLECER CRITERIO PARA OBTENER PRIVILEGIO DE CAMBIAR COMPLEMENTO 1 -->

                <mat-step>
                  <ng-template matStepLabel>
                    <div>Complemento 1</div>
                  </ng-template>

                  <div>

                    <label class="LabelStepper">Introduzca el criterio para obtener el privilegio de <strong>cambiar el
                        primer complemento</strong></label>
                    <mat-form-field>
                      <input matInput formControlName="criterioPrivilegioComplemento1" placeholder="Escriba el criterio"
                        requiered>
                    </mat-form-field>
                  </div>

                  <div class="btnCambiarStep">
                    <button type="button" class="btn Back" matStepperPrevious>Atrás</button>
                    <button type="button" class="btn Next" matStepperNext>Siguiente</button>
                  </div>
                </mat-step>
                >

                <!-- QUINTO PASO: ESTABLECER CRITERIO PARA OBTENER PRIVILEGIO DE CAMBIAR COMPLEMENTO 2 -->

                <mat-step>
                  <ng-template matStepLabel>
                    <div>Complemento 2</div>
                  </ng-template>

                  <div>

                    <label class="LabelStepper">Introduzca el criterio para obtener el privilegio de <strong>cambiar el
                        segundo complemento</strong></label>
                    <mat-form-field>
                      <input matInput formControlName="criterioPrivilegioComplemento2" placeholder="Escriba el criterio"
                        requiered>
                    </mat-form-field>
                  </div>

                  <div class="btnCambiarStep">
                    <button type="button" class="btn Back" matStepperPrevious>Atrás</button>
                    <button type="button" class="btn Next" matStepperNext>Siguiente</button>
                  </div>
                </mat-step>


                <!-- SEXTO PASO: ESTABLECER CRITERIO PARA OBTENER PRIVILEGIO DE CAMBIAR COMPLEMENTO 3 -->
                <mat-step>
                  <ng-template matStepLabel>
                    <div>Complemento 3</div>
                  </ng-template>

                  <div>

                    <label class="LabelStepper">Introduzca el criterio para obtener el privilegio de <strong>cambiar el
                        tercer complemento</strong></label>
                    <mat-form-field>
                      <input matInput formControlName="criterioPrivilegioComplemento3" placeholder="Escriba el criterio"
                        requiered>
                    </mat-form-field>
                  </div>

                  <div class="btnCambiarStep">
                    <button type="button" class="btn Back" matStepperPrevious>Atrás</button>
                    <button type="button" class="btn Next" matStepperNext>Siguiente</button>
                  </div>
                </mat-step>

                <!-- SEPTIMO PASO: ESTABLECER CRITERIO PARA OBTENER PRIVILEGIO DE CAMBIAR COMPLEMENTO 4 -->
                <mat-step>
                  <ng-template matStepLabel>
                    <div>Complemento 4</div>
                  </ng-template>

                  <div>

                    <label class="LabelStepper">Introduzca el criterio para obtener el privilegio de <strong>cambiar el
                        cuarto complemento</strong></label>
                    <mat-form-field>
                      <input matInput formControlName="criterioPrivilegioComplemento4" placeholder="Escriba el criterio"
                        requiered>
                    </mat-form-field>
                  </div>

                  <div class="btnCambiarStep">
                    <button type="button" class="btn Back" matStepperPrevious>Atrás</button>
                    <button type="button" class="btn Next" matStepperNext>Siguiente</button>
                  </div>
                </mat-step>

                <!-- OCTAVO PASO: ESTABLECER CRITERIO PARA OBTENER PRIVILEGIO DE AGREGAR VOZ -->
                <mat-step>
                  <ng-template matStepLabel>
                    <div>Voz</div>
                  </ng-template>

                  <div>

                    <label class="LabelStepper">Introduzca el criterio para obtener el privilegio de <strong> agragar
                        voz </strong></label>
                    <mat-form-field>
                      <input matInput formControlName="criterioPrivilegioVoz" placeholder="Escriba el criterio"
                        requiered>
                    </mat-form-field>
                  </div>

                  <div class="btnCambiarStep">
                    <button type="button" class="btn Back" matStepperPrevious>Atrás</button>
                    <button type="button" class="btn Next" matStepperNext>Siguiente</button>
                  </div>
                </mat-step>

                <!-- NOVENO PASO: ESTABLECER CRITERIO PARA OBTENER PRIVILEGIO DE VER AVATARES DE COMPAÑEROS -->
                <mat-step>
                  <ng-template matStepLabel>
                    <div>Ver avatares</div>
                  </ng-template>

                  <div>

                    <label class="LabelStepper">Introduzca el criterio para obtener el privilegio de <strong>ver los
                        avatares de los compañeros</strong></label>
                    <mat-form-field>
                      <input matInput formControlName="criterioPrivilegioVerTodos" placeholder="Escriba el criterio"
                        requiered>
                    </mat-form-field>
                  </div>

                  <div class="btnCambiarStep">
                    <button type="button" class="btn Back" matStepperPrevious>Atrás</button>
                    <button type="button" class="btn Next" matStepperNext>Siguiente</button>
                  </div>
                </mat-step>
                <!-- FINALIZAR  -->
                <mat-step>
                  <ng-template matStepLabel>Finalizar</ng-template>

                  <span style="font-weight: bold;color:green;"> Has elegido ... {{tipoDeJuegoSeleccionado}}...
                    {{tipoJuegoCompeticionSeleccionado}} ... {{modoDeJuegoSeleccionado}} </span>
                  <div class="btnCambiarStep">
                    <button type="button" class="btn Back" matStepperPrevious>Atrás</button>
                    <button style="width: 60%" type="button" class="btn Aceptar" (click)="CrearJuegoDeAvatar()">Crear
                      juego de avatar</button>
                  </div>
                </mat-step>
              </div>


              <!-- ////////////////////// SI ESCOGEMOS JUEGO DE GEOCACHING ////////////////////////////////-->
              <div *ngIf="tipoDeJuegoSeleccionado === 'Juego De Geocaching' && tengoModo">
                <!--Escogemos el escenario-->
                <mat-step>
                  <ng-template matStepLabel>
                    <div>Escenario</div>
                  </ng-template>
                  <label class="LabelStepper" style="font-size: larger; font-weight: bolder;">Selecciona el
                    escenario</label>

                  <app-asigna-escenario (emisorEscenario)="RecibeEscenario ($event)">
                  </app-asigna-escenario>

                  <span *ngIf="tengoEscenario" style="font-weight: bold;color:green;"> Has elegido ...
                    {{tipoDeJuegoSeleccionado}}... {{tipoJuegoCompeticionSeleccionado}} ... {{modoDeJuegoSeleccionado}}
                    ... {{escenario.Mapa}} </span>
                  <div class="btnCambiarStep">
                    <button type="button" class="btn Back" matStepperPrevious>Atrás</button>
                    <button [disabled]="!tengoEscenario" type="button" class="btn Next"
                      matStepperNext>Siguiente</button>
                  </div>
                </mat-step>

                <!--Añadir preguntas-->
                <mat-step>
                  <ng-template matStepLabel>
                    <div>Preguntas</div>
                  </ng-template>
                  <div>
                    <button type="button" class="btn Agregar" (click)="AbrirDialogoAgregarPreguntas()"
                      style="width: auto;">Añadir preguntas<i class="material-icons">
                        post_add </i></button>
                  </div>
                  <div class="btnCambiarStep">
                    <button type="button" class="btn Back" matStepperPrevious>Atrás</button>
                    <button [disabled]="!tengoPreguntas" type="button" class="btn Next"
                      matStepperNext>Siguiente</button>
                  </div>
                </mat-step>



                <!--Tercer paso, establecemos la puntuacion-->
                <mat-step>
                  <ng-template matStepLabel>
                    <div>Puntuación</div>
                  </ng-template>

                  <mat-form-field>
                    <mat-label>Introduzca la puntuacion por respuesta correcta</mat-label>
                    <input matInput formControlName="PuntuacionCorrectaGeo" placeholder="Escriba la puntuacion"
                      requiered>
                  </mat-form-field>

                  <mat-form-field>
                    <mat-label>Introduzca la puntuacion por respuesta incorrecta (si no quiere restar ponga 0)
                    </mat-label>
                    <input matInput formControlName="PuntuacionIncorrectaGeo" placeholder="Escriba la puntuacion"
                      requiered>
                  </mat-form-field>

                  <mat-form-field>
                    <mat-label>Introduzca el porcentaje a sumar por respuesta bonus correcta </mat-label>
                    <input matInput formControlName="PuntuacionCorrectaGeoBonus" placeholder="Escriba el porcentaje"
                      requiered>
                  </mat-form-field>

                  <mat-form-field>
                    <mat-label>Introduzca el porcentaje a restar por respuesta bonus incorrecta </mat-label>
                    <input matInput formControlName="PuntuacionIncorrectaGeoBonus" placeholder="Escriba el porcentaje"
                      requiered>
                  </mat-form-field>
                  <div class="btnCambiarStep">
                    <button type="button" class="btn Back" matStepperPrevious>Atrás</button>
                    <button [disabled]="!TengoPuntuacionesGeocatching()" (click)="GuardarPuntuacionGeocaching()"
                      type="button" class="btn Next" matStepperNext>Siguiente</button>
                  </div>
                </mat-step>
                <!--Cuarto paso, finalizamos-->

                <mat-step>
                  <ng-template matStepLabel>
                    <div>Finalizar</div>
                  </ng-template>

                  <div class="btnCambiarStep">
                    <button type="button" class="btn Back" matStepperPrevious>Atrás</button>
                    <button style="width: 60%" type="button" class="btn Aceptar"
                      (click)="CrearJuegoDeGeocaching()">Crear juego de geocaching</button>
                  </div>
                </mat-step>

              </div>

              <!--/////////////////////// SI ESCOGEMOS EL JUEGO DE TIPO CUESTIONARIO DE SATISFACCION /////////-->
              <div *ngIf="tipoDeJuegoSeleccionado === 'Juego De Cuestionario de Satisfacción' && tengoModo">

                <!-- TERCER PASO: ELEGIR CUESTIONARIO -->
                <mat-step>
                  <ng-template matStepLabel>
                    <div>Cuestionario</div>
                  </ng-template>
                  <label class="LabelStepper" style="font-size: larger; font-weight: bolder;">Selecciona el cuestionario
                    de satisfacción</label>

                  <app-asignar-cuestionario-satisfaccion
                    (emisorCuestionarioSatisfaccionElegido)="RecibeCuestionarioSatisfaccionElegido ($event)">
                  </app-asignar-cuestionario-satisfaccion>
                  <span *ngIf="tengoCuestionarioSatisfaccion" style="font-weight: bold;color:green;"> Has elegido ...
                    {{tipoDeJuegoSeleccionado}}: {{cuestionarioSatisfaccion.Titulo}} ... {{modoDeJuegoSeleccionado}}
                  </span>
                  <div class="btnCambiarStep">
                    <button type="button" class="btn Back" matStepperPrevious>Atrás</button>
                    <button *ngIf="tengoCuestionarioSatisfaccion" type="button" class="btn Next"
                      matStepperNext>Siguiente</button>
                  </div>
                </mat-step>

                <!--cuarto paso, modificamos la descripcion-->
                <mat-step *ngIf="tengoCuestionarioSatisfaccion">
                  <ng-template matStepLabel>
                    <div>Descripción</div>
                  </ng-template>
                  <!-- casilla para introducir puntuacion que sumamos -->
                  <!-- <mat-form-field> -->
                  <mat-label>Modifica (si es necesario) la descipción</mat-label>
                  <!-- <textarea type="text" id="form7"  class="md-textarea md-textarea-auto form-control" [(ngModel)] = "cuestionarioSatisfaccion.Descripcion"></textarea> -->
                  <textarea class="md-textarea md-textarea-auto form-control"
                    (change)="GuardaDescripcionCuestionarioSatisfaccion($event)">{{cuestionarioSatisfaccion.Descripcion}}</textarea>
                  <!-- <input  matInput formControlName="DescripcionCuestionarioSatisfaccion" placeholder="Escriba puntos a sumar" requiered> -->
                  <!-- </mat-form-field> -->

                  <div class="btnCambiarStep">
                    <button type="button" class="btn Back" matStepperPrevious>Atrás</button>
                    <button type="button" class="btn Next" matStepperNext>Siguiente</button>
                  </div>
                </mat-step>

                <!--Ultimo paso, finalizamos-->
                <mat-step>
                  <ng-template matStepLabel>
                    <div>Finalizar</div>
                  </ng-template>

                  <div class="btnCambiarStep">
                    <button type="button" class="btn Back" matStepperPrevious>Atrás</button>
                    <button style="width: 60%" type="button" class="btn Aceptar"
                      (click)="CrearJuegoDeCuestionarioDeSatisfaccion()">Crear juego de cuestionario de
                      satisfacción</button>
                  </div>
                </mat-step>
              </div>



              <!-- ///////////////JUEGO DE EVALUACION///////////////// -->
              <div *ngIf="tipoDeJuegoSeleccionado === 'Juego De Evaluación' && tengoModo">
                <!-- Modo de evaluación en caso de equipos -->
                <mat-step *ngIf="modoDeJuegoSeleccionado === 'Equipos'">
                  <ng-template matStepLabel>
                    <div>Equipos</div>
                  </ng-template>

                  <div class="colorsChips">
                    <label class="LabelStepper">Los equipos seran evaluados por:</label>
                    <mat-chip-list class="mat-chip-list-stacked">
                      <mat-chip *ngFor="let equipo of seleccionEquiposEvaluacion; let i = index" selected
                        [color]="equipo.color" selected="{{seleccionEquiposEvaluacion[i].selected}}"
                        (click)="EquipoDeEvaluacionSeleccionado(seleccionEquiposEvaluacion[i])" [value]="equipo.nombre"
                        [selectable]="true">
                        {{equipo.nombre}}
                      </mat-chip>
                    </mat-chip-list>
                    <span style="font-weight: bold;color:green;"> Has elegido ... {{tipoDeJuegoSeleccionado}} ...
                      {{equiposEvaluacionSeleccionado}}</span>

                  </div>
                  <div class="btnCambiarStep">
                    <button type="button" class="btn Back" matStepperPrevious>Atrás</button>
                    <button [disabled]="!tengoEquipoEvaluacion" type="button" class="btn Next"
                      matStepperNext>Siguiente</button>
                  </div>
                </mat-step>
                <!-- Descripcion y formato de evaluacion ('con rúbrica' o 'solo preguntas abiertas') -->
                <mat-step>
                  <ng-template matStepLabel>
                    <div>Descripción</div>
                  </ng-template>
                  <mat-form-field>
                    <mat-label>Descripción del Juego</mat-label>
                    <textarea matInput placeholder="Descripción" required formControlName="DescripcionJuegoEvaluacion"
                      (keyup)="GuardarDescripcionEvaluacion()"></textarea>
                  </mat-form-field>

                  <br>
                  <br>

                  <mat-label><b>Formato de la evaluación</b></mat-label>


                  <mat-radio-group class="radBtnProf" aria-label="Select an option">
                    <mat-radio-button value="'con rúbrica'" [checked]="formatoEvaluacion === 'con rúbrica'"
                      (change)="formatoEvaluacion = 'con rúbrica'"><b>Evaluación con rúbrica</b></mat-radio-button>
                    <mat-radio-button value="'solo preguntas abiertas'"
                      [checked]="formatoEvaluacion === 'solo preguntas abiertas'"
                      (change)="formatoEvaluacion = 'solo preguntas abiertas'"><b>Solo preguntas abiertas</b>
                    </mat-radio-button>
                  </mat-radio-group>

                  <!-- <mat-radio-group aria-labelledby="example-radio-group-label" class="radio-group">
                      <mat-radio-button (click)="formatoEvaluacion = 'con rúbrica'" class="radio-button" [value] = "'con rúbrica'" >
                        <label style="color: black;">Evaluación con rúbrica</label>
                      </mat-radio-button>
                      <mat-radio-button (click)="formatoEvaluacion = 'solo preguntas abiertas'" class="radio-button"  [value] = "'solo preguntas abiertas'">
                        <label style="color: black;">Solo preguntas abiertas</label>
                      </mat-radio-button>
                    </mat-radio-group> -->


                  <span style="font-weight: bold;color:green;"> Has elegido ... {{tipoDeJuegoSeleccionado}} ...
                    {{modoDeJuegoSeleccionado}} ... {{formatoEvaluacion}} </span>


                  <div class="btnCambiarStep">
                    <button type="button" class="btn Back" matStepperPrevious>Atrás</button>
                    <button [disabled]="!formatoEvaluacion || descripcionJuegoEvaluacion.length === 0 " type="button"
                      class="btn Next" matStepperNext>Siguiente</button>
                  </div>
                </mat-step>

                <mat-step *ngIf="formatoEvaluacion === 'con rúbrica'">
                  <ng-template matStepLabel>
                    <div>Rúbrica</div>
                  </ng-template>
                  <label class="LabelStepper" style="font-size: larger; font-weight: bolder;">Selecciona la
                    rúbrica</label>
                  <div class="enColumna">
                    <app-asignar-rubrica (emisorRubricaElegida)="RecibeRubricaElegida ($event)" style="width: 100%">
                    </app-asignar-rubrica>

                    <div class="enColumna" *ngIf="tengoRubrica" style="width: 40%">
                      <br>
                      <span style="font-size: larger; color:darkred;">Ajusta el peso de cada criterio</span>
                      <br>
                      <table *ngFor="let criterio of rubricaElegida.Criterios; let c = index">
                        <tr>
                          <td>
                            <b>{{criterio.Nombre}}</b>
                          </td>
                          <td>
                            <mat-form-field class="input-porcentaje">
                              <input matInput type="number" name="{{c}}"
                                (keyup)="PesosParentChanged($event.target.name, $event.target.value)"
                                (change)="PesosParentChanged($event.target.name, $event.target.value)"
                                value="{{PesoPorDefecto(rubricaElegida.Criterios.length)}}" min="0" max="100">
                              <span matSuffix>%</span>
                            </mat-form-field>
                          </td>
                        </tr>
                      </table>
                    </div>

                  </div>


                  <div class="btnCambiarStep">
                    <button type="button" class="btn Back" matStepperPrevious>Atrás</button>
                    <button
                      [disabled]="!tengoRubrica || descripcionJuegoEvaluacion.length === 0 || !ParentPesosSuman100()"
                      type="button" class="btn Next" matStepperNext>Siguiente</button>
                  </div>
                </mat-step>


                <!-- Seleccion de preguntas abiertas -->
                <mat-step *ngIf="formatoEvaluacion === 'solo preguntas abiertas'">

                  <ng-template matStepLabel>
                    <div>Preguntas abiertas</div>
                  </ng-template>



                  <div class="contenedor">
                    <div class="enColumna">
                      <div class="enFila" style="width: 130%">
                        <mat-form-field style='width: 40%; margin-right: 5%;'>
                          <mat-label>Pregunta</mat-label>
                          <input matInput required formControlName="PreguntaAbierta">
                        </mat-form-field>
                        <br>


                        <button type="button" class="btn Agregar" (click)="PonPreguntaAbierta()">Añade pregunta</button>

                        <button type="button" class="btn Aceptar" (click)="AsignarPreguntasAbiertas()"> Asignar
                          preguntas </button>
                      </div>

                      <h2>Lista de preguntas abiertas</h2>
                      <form style="width: 100%">

                        <table style="width: 100%" align="left" mat-table [dataSource]="dataSourcePreguntasAbiertas"
                          class="mat-elevation-z8">

                          <ng-container matColumnDef="pregunta" style="width: 60%">
                            <th mat-header-cell *matHeaderCellDef class="tituloColumnaTabla"> Pregunta </th>
                            <td mat-cell *matCellDef="let pregunta"> {{pregunta}} </td>
                            <td mat-footer-cell *matFooterCellDef></td>
                          </ng-container>


                          <ng-container matColumnDef=" " style="width: 20%; text-align: right;">
                            <th mat-header-cell *matHeaderCellDef class="tituloColumnaTabla"></th>
                            <td mat-cell *matCellDef="let pregunta">
                              <button (click)="BorraPreguntaAbierta(pregunta)" mat-icon-button>
                                <i class="material-icons red md-36">delete</i>
                              </button>
                            </td>
                            <td mat-footer-cell *matFooterCellDef></td>
                          </ng-container>


                          <tr mat-header-row *matHeaderRowDef="displayedColumnsPreguntasAbiertas"></tr>
                          <tr mat-row *matRowDef="let row; columns: displayedColumnsPreguntasAbiertas;"></tr>
                          <mat-footer-row class="sticky-footer" *matFooterRowDef="['pregunta', ' ']"></mat-footer-row>


                        </table>
                      </form>


                    </div>
                  </div>

                  <div class="btnCambiarStep">
                    <button type="button" class="btn Back" matStepperPrevious>Atrás</button>
                    <button [disabled]="!preguntasAbiertasAsignadas" type="button" class="btn Next"
                      matStepperNext>Siguiente</button>
                  </div>


                </mat-step>

                <!-- Evaluacion todos a todos o 1 a N -->
                <mat-step>
                  <ng-template matStepLabel>
                    <div>Evaluación</div>
                  </ng-template>

                  <div class="colorsChips">
                    <label class="LabelStepper">Selecciona la forma de evaluación:</label>
                    <mat-chip-list class="mat-chip-list-stacked">
                      <mat-chip *ngFor="let tipo of seleccionTipoDeEvaluacion; let i = index" selected
                        [color]="tipo.color" selected="{{seleccionTipoDeEvaluacion[i].selected}}"
                        (click)="TipoDeEvaluacionSeleccionado(seleccionTipoDeEvaluacion[i])" [value]="tipo.nombre"
                        [selectable]="true">
                        {{tipo.nombre}}
                      </mat-chip>
                    </mat-chip-list>
                    <div *ngIf="tipoDeEvaluacionSeleccionado === '1 a N'">
                      <label class="LabelStepper">Selecciona cuántos evaluadores tendrá cada uno (1 a N): N = </label>
                      <mat-slider class="members-slider" (change)="SliderChanged($event.value)" [max]="DameMaxSlider()"
                        [value]="1" [thumbLabel]="true">
                      </mat-slider>
                    </div>
                    <span style="font-weight: bold;color:green;"> Has elegido ... {{tipoDeJuegoSeleccionado}} ...
                      {{tipoDeEvaluacionSeleccionado}}</span>

                  </div>
                  <div class="btnCambiarStep">
                    <button type="button" class="btn Back" matStepperPrevious>Atrás</button>
                    <button
                      [disabled]="!tengoTipoDeEvaluacion || (tipoDeEvaluacionSeleccionado === '1 a N' && numeroDeMiembros == 0)"
                      type="button" class="btn Next" matStepperNext>Siguiente</button>
                  </div>
                </mat-step>
                <!-- Relaciones aleatorias o a mano -->
                <mat-step *ngIf="tipoDeEvaluacionSeleccionado === '1 a N'">
                  <ng-template matStepLabel>
                    <div>Relaciones</div>
                  </ng-template>

                  <div class="colorsChips">
                    <label class="LabelStepper">Selecciona cómo hacer las relaciones:</label>
                    <mat-chip-list class="mat-chip-list-stacked">
                      <mat-chip *ngFor="let relacion of seleccionRelacionesEvaluacion; let i = index" selected
                        [color]="relacion.color" selected="{{seleccionRelacionesEvaluacion[i].selected}}"
                        (click)="RelacionDeEvaluacionSeleccionado(seleccionRelacionesEvaluacion[i])"
                        [value]="relacion.nombre" [selectable]="true">
                        {{relacion.nombre}}
                      </mat-chip>
                    </mat-chip-list>
                    <span style="font-weight: bold;color:green;"> Has elegido ... {{tipoDeJuegoSeleccionado}} ...
                      {{relacionesEvaluacionSeleccionado}}</span>
                  </div>
                  <div class="btnCambiarStep">
                    <button type="button" class="btn Back" matStepperPrevious>Atrás</button>
                    <button [disabled]="!tengoRelacionEvaluacion" type="button" class="btn Next"
                      matStepperNext>Siguiente</button>
                  </div>
                </mat-step>
                <!--PASO DE ELEGIR LAS RELACIONES MENUALMENTE-->
                <mat-step>
                  <ng-template matStepLabel>
                    <div>Relaciones</div>
                  </ng-template>
                  <table>
                    <tr *ngFor="let evaluado of DameEvaluados()">
                      <td>
                        <mat-label>{{evaluado.Nombre}} {{evaluado.PrimerApellido}}</mat-label>
                      </td>
                      <td>
                        <mat-form-field appearance="fill">
                          <mat-label *ngIf="relacionesEvaluacionSeleccionado !== 'Aleatorio'">Selecciona sus evaluadores
                          </mat-label>
                          <mat-label *ngIf="relacionesEvaluacionSeleccionado === 'Aleatorio'" style="color: green;">
                            Evaluadores Asignados</mat-label>
                          <mat-select
                            *ngIf="modoDeJuegoSeleccionado !== 'Equipos' || equiposEvaluacionSeleccionado !== 'Individualmente'"
                            multiple (selectionChange)="RelacionChanged(evaluado.id, $event.value)"
                            [value]="this.relacionesMap.get(evaluado.id)">
                            <!--<mat-select-trigger>
                              <span>
                                ({{this.relacionesMap.get(evaluado.id) ? this.relacionesMap.get(evaluado.id).length : 0}})
                              </span>
                            </mat-select-trigger>-->
                            <mat-option *ngFor="let evaluador of DameEvaluadores() | exclude:evaluado"
                              [value]="evaluador.id">{{evaluador.Nombre}} {{evaluador.PrimerApellido}} <span
                                *ngIf="ContarEvaluadores(evaluador.id) > 0">({{ContarEvaluadores(evaluador.id)}})</span>
                            </mat-option>
                          </mat-select>
                          <mat-select
                            *ngIf="modoDeJuegoSeleccionado === 'Equipos' && equiposEvaluacionSeleccionado === 'Individualmente'"
                            multiple (selectionChange)="RelacionChanged(evaluado.id, $event.value)"
                            [value]="this.relacionesMap.get(evaluado.id)">
                            <mat-option *ngFor="let evaluador of DameEvaluadores() | teamExclude:evaluado"
                              [value]="evaluador.id">{{evaluador.Nombre}} {{evaluador.PrimerApellido}}<span
                                *ngIf="ContarEvaluadores(evaluador.id) > 0">({{ContarEvaluadores(evaluador.id)}})</span>
                            </mat-option>
                          </mat-select>
                        </mat-form-field>
                      </td>
                    </tr>
                  </table>

                  <div class="btnCambiarStep">
                    <button type="button" class="btn Back" matStepperPrevious>Atrás</button>
                    <button [disabled]="!(todosTienenEvaluador && comprobacionDeN)" type="button" class="btn Next"
                      matStepperNext>Siguiente</button>
                  </div>
                </mat-step>
                <!-- Evaluacion por parte del profe y/o autoevaluacion -->
                <mat-step>
                  <ng-template matStepLabel>
                    <div>Extras</div>
                  </ng-template>
                  <mat-list>

                    <mat-list-item>
                      <mat-checkbox (change)="AutoevaluacionChange($event.checked)">
                        <b>Autoevaluación</b>
                      </mat-checkbox>
                    </mat-list-item>

                    <mat-list-item>
                      <mat-checkbox (change)="ProfesorEvaluaChange($event.checked)">
                        <b>Profesor Evalua</b>
                      </mat-checkbox>
                    </mat-list-item>

                    <mat-radio-group *ngIf="profesorEvalua && formatoEvaluacion === 'con rúbrica'" class="radBtnProf"
                      aria-label="Select an option">
                      <mat-radio-button value="normal" [checked]="profesorEvaluaModo === 'normal'"
                        (change)="ProfesorEvaluaModoChange($event.value)"><b>Normal: La nota se cuenta como la de un
                          evaluador más</b></mat-radio-button>
                      <mat-radio-button value="dominante" [checked]="profesorEvaluaModo === 'dominante'"
                        (change)="ProfesorEvaluaModoChange($event.value)"><b>Dominante: La nota del profesor es un 50%
                          del total</b></mat-radio-button>
                    </mat-radio-group>

                  </mat-list>

                  <div class="btnCambiarStep">
                    <button type="button" class="btn Back" matStepperPrevious>Atrás</button>
                    <button type="button" class="btn Next" matStepperNext>Siguiente</button>
                  </div>
                </mat-step>
                <!-- Forma de puntuar en caso de rubrica -->
                <mat-step *ngIf="formatoEvaluacion === 'con rúbrica'">
                  <ng-template matStepLabel>
                    <div>Criterio</div>
                  </ng-template>

                  <div class="colorsChips">
                    <label class="LabelStepper">Selecciona con qué criterio se puntuará:</label>
                    <mat-chip-list class="mat-chip-list-stacked">
                      <mat-chip *ngFor="let criterio of seleccionCriterioEvaluacion; let i = index" selected
                        [color]="criterio.color" selected="{{seleccionCriterioEvaluacion[i].selected}}"
                        (click)="CriterioDeEvaluacionSeleccionado(seleccionCriterioEvaluacion[i])"
                        [value]="criterio.nombre" [selectable]="true">
                        {{criterio.nombre}}
                      </mat-chip>
                    </mat-chip-list>
                    <span style="font-weight: bold;color:green;"> Has elegido ... {{tipoDeJuegoSeleccionado}} ...
                      {{criterioEvaluacionSeleccionado}}</span>

                  </div>
                  <div class="btnCambiarStep">
                    <button type="button" class="btn Back" matStepperPrevious>Atrás</button>
                    <button [disabled]="!tengoCriterioEvaluacion" type="button" class="btn Next"
                      matStepperNext>Siguiente</button>
                  </div>
                </mat-step>
                <!-- Mas sobre forma de puntuar en caso de rubrica -->
                <mat-step
                  *ngIf="(formatoEvaluacion === 'con rúbrica') && (criterioEvaluacionSeleccionado === 'Por pesos')">
                  <ng-template matStepLabel>
                    <div>Pesos</div>
                  </ng-template>
                  <mat-divider></mat-divider>
                  <div *ngFor="let criterio of rubricaElegida.Criterios; let c = index">
                    <table>
                      <tr>
                        <td>
                          <b>{{criterio.Nombre}}</b>
                        </td>
                        <td>
                          <b class="input-porcentaje texto-izquierda">{{parentPesos[c]}} %</b>
                        </td>
                      </tr>
                      <tr *ngFor="let elemento of criterio.Elementos; let e = index">
                        <td>
                          {{elemento}}
                        </td>
                        <td>
                          <mat-form-field class="input-porcentaje">
                            <input matInput type="number" name="{{c}}-{{e+1}}"
                              (keyup)="PesosChanged($event.target.name, $event.target.value)"
                              (change)="PesosChanged($event.target.name, $event.target.value)"
                              value="{{PesoPorDefecto(criterio.Elementos.length)}}" min="0" max="100">
                            <span matSuffix>%</span>
                          </mat-form-field>
                        </td>
                      </tr>
                    </table>
                    <mat-divider></mat-divider>
                  </div>
                  <div class="btnCambiarStep">
                    <button type="button" class="btn Back" matStepperPrevious>Atrás</button>
                    <button [disabled]="!pesosSuman100" type="button" class="btn Next" matStepperNext>Siguiente</button>
                  </div>
                </mat-step>
                <!-- Mas sobre forma de puntuar en caso de rubrica -->
                <mat-step
                  *ngIf="(formatoEvaluacion === 'con rúbrica') && (criterioEvaluacionSeleccionado === 'Por penalización')">
                  <ng-template matStepLabel>
                    <div>Penalización</div>
                  </ng-template>
                  <mat-divider></mat-divider>
                  <div *ngFor="let criterio of rubricaElegida.Criterios; let c = index">
                    <table>
                      <tr>
                        <td>
                          <b>{{criterio.Nombre}}</b>
                        </td>
                        <td>
                          <b class="input-porcentaje texto-izquierda">{{parentPesos[c]}} %</b>
                        </td>
                      </tr>
                      <tr *ngFor="let elemento of criterio.Elementos; let e = index">
                        <td>
                          {{e+1}}. {{elemento}}
                        </td>
                        <td>
                        </td>
                      </tr>
                    </table>
                    <table>
                      <tr>
                        <td>
                          <mat-form-field>
                            <mat-label>Número de fallos</mat-label>
                            <input matInput type="number" value="0" disabled>
                            <span matSuffix>o más</span>
                          </mat-form-field>
                        </td>
                        <td>
                          <mat-form-field>
                            <mat-label>Se quedará con un</mat-label>
                            <input matInput type="number" value="100" disabled>
                            <span matSuffix>%</span>
                          </mat-form-field>
                        </td>
                        <td>
                      </tr>
                      <tr *ngIf="criterio.Elementos.length >= 1">
                        <td>
                          <mat-form-field>
                            <mat-label>Número de fallos</mat-label>
                            <input matInput type="number" name="{{c}}-0-num"
                              (keyup)="PenalizacionChanged($event.target.name, $event.target.value)"
                              (change)="PenalizacionChanged($event.target.name, $event.target.value)" value="1" min="1"
                              max="{{criterio.Elementos.length}}">
                            <span matSuffix>o más</span>
                          </mat-form-field>
                        </td>
                        <td>
                          <mat-form-field>
                            <mat-label>Se quedará con un</mat-label>
                            <input matInput type="number" name="{{c}}-0-p"
                              (keyup)="PenalizacionChanged($event.target.name, $event.target.value)"
                              (change)="PenalizacionChanged($event.target.name, $event.target.value)" value="75" min="0"
                              max="100">
                            <span matSuffix>%</span>
                          </mat-form-field>
                        </td>
                      </tr>
                      <tr *ngIf="criterio.Elementos.length >= 2">
                        <td>
                          <mat-form-field>
                            <mat-label>Número de fallos</mat-label>
                            <input matInput type="number" name="{{c}}-1-num"
                              (keyup)="PenalizacionChanged($event.target.name, $event.target.value)"
                              (change)="PenalizacionChanged($event.target.name, $event.target.value)" value="2" min="2"
                              max="{{criterio.Elementos.length}}">
                            <span matSuffix>o más</span>
                          </mat-form-field>
                        </td>
                        <td>
                          <mat-form-field>
                            <mat-label>Se quedará con un</mat-label>
                            <input matInput type="number" name="{{c}}-1-p"
                              (keyup)="PenalizacionChanged($event.target.name, $event.target.value)"
                              (change)="PenalizacionChanged($event.target.name, $event.target.value)" value="50" min="0"
                              max="100">
                            <span matSuffix>%</span>
                          </mat-form-field>
                        </td>
                      <tr *ngIf="criterio.Elementos.length >= 3">
                        <td>
                          <mat-form-field>
                            <mat-label>Número de fallos</mat-label>
                            <input matInput type="number" name="{{c}}-2-num"
                              (keyup)="PenalizacionChanged($event.target.name, $event.target.value)"
                              (change)="PenalizacionChanged($event.target.name, $event.target.value)" value="3" min="3"
                              max="{{criterio.Elementos.length}}">
                            <span matSuffix>o más</span>
                          </mat-form-field>
                        </td>
                        <td>
                          <mat-form-field>
                            <mat-label>Se quedará con un</mat-label>
                            <input matInput type="number" name="{{c}}-2-p"
                              (keyup)="PenalizacionChanged($event.target.name, $event.target.value)"
                              (change)="PenalizacionChanged($event.target.name, $event.target.value)" value="0" min="0"
                              max="100">
                            <span matSuffix>%</span>
                          </mat-form-field>
                        </td>
                      </tr>
                    </table>
                    <mat-divider></mat-divider>
                  </div>
                  <div class="btnCambiarStep">
                    <button type="button" class="btn Back" matStepperPrevious>Atrás</button>
                    <button type="button" class="btn Next" matStepperNext>Siguiente</button>
                  </div>
                </mat-step>
                <!-- Qué va a poder ver el evaluado -->
                <mat-step>
                  <ng-template matStepLabel>
                    <div>Vista evaluado</div>
                  </ng-template>

                  <mat-radio-group class="radBtnProf" aria-label="Select an option">
                    <mat-radio-button value="soloGlobal" [checked]="modoVistaistaEvaluado === 'soloGlobal'"
                      (change)="ModoVistaEvaluadoChange($event.value)"> <b>La persona evaluada solo podrá ver el
                        resultado global</b></mat-radio-button>
                    <mat-radio-button value="todo" [checked]="modoVistaEvaluado === 'todo'"
                      (change)="ModoVistaEvaluadoChange($event.value)"> <b>La persona evaluada podrá ver el resultado
                        global y cada una de las evaluaciones recibidas</b></mat-radio-button>
                  </mat-radio-group>


                  <div class="btnCambiarStep">
                    <button type="button" class="btn Back" matStepperPrevious>Atrás</button>
                    <button [disabled]="!tengoVistaEvaluado" type="button" class="btn Aceptar"
                      (click)="CrearJuegoEvaluacion()">Finalizar</button>
                  </div>


                </mat-step>

              </div>


              <!-- ////////////////////////////SI ESCOGEMOS EL JUEGO DE TIPO DE  CREAR CUENTO  ////////////////////////////////-->

              <div *ngIf="tipoDeJuegoSeleccionado === 'Juego De Cuentos' && tengoModo">


                <mat-step>
                  <ng-template matStepLabel>
                    <div> Descripción </div>
                  </ng-template>



                  <div>
                    <label class="LabelStepper">Añadir alguna indicación para los alumnos </label>
                    <mat-form-field>
                      <input matInput formControlName="descripcionCuento" placeholder="Escriba aqui" requiered>
                    </mat-form-field>
                  </div>

                  <div class="btnCambiarStep">
                    <button type="button" class="btn Back" matStepperPrevious>Atrás</button>
                    <button type="button" class="btn Next" (click)="avanzoElegirRecursos()"
                      matStepperNext>Siguiente</button>
                  </div>
                </mat-step>

                <!-- //////////////////////////////////// -->

                <!-- ///////////////////////////////////////// -->

                <mat-step>
                  <ng-template matStepLabel>
                    <div>Elegir recurso</div>
                  </ng-template>

                  <label class="LabelStepper">Selecciona la carpeta de imagenes para el juego</label>
                  <!-- Nos vamos al componente para asignar la colección -->
                  <app-asignar-recursos-juego-cuentos *ngIf="avanzo1" (emisorRecursosElegidos)="RecibeRecursos($event)">
                  </app-asignar-recursos-juego-cuentos>
                  <div class="btnCambiarStep">
                    <button type="button" class="btn Back" (click)="avanzoElegirRecursos()"
                      matStepperPrevious>Atrás</button>
                    <button *ngIf="tengoRecurso" type="button" class="btn Next" (click)="avanzoElegirEspeciales()"
                      matStepperNext>Siguiente</button>
                  </div>

                </mat-step>

                <mat-step>
                  <ng-template matStepLabel>
                    <div>Elegir especiales</div>
                  </ng-template>

                  <label class="LabelStepper">Selecciona los elementos que serán especiales en el juego</label>
                  <!-- Nos vamos al componente para asignar la colección -->
                  <app-asigna-especial-juego-cuentos *ngIf="avanzo2" (emisorRecursoCargado)="cargaRecursos($event)">
                  </app-asigna-especial-juego-cuentos>
                  <div class="btnCambiarStep">
                    <button type="button" class="btn Back" (click)="avanzoElegirEspeciales()"
                      matStepperPrevious>Atrás</button>
                    <button *ngIf="tengoRecursoCargadoParaGuardar" type="button" class="btn Next"
                      matStepperNext>Siguiente</button>
                  </div>

                </mat-step>

                <mat-step>
                  <ng-template matStepLabel>
                    <div> Privilegios </div>
                  </ng-template>

                  <mat-form-field>
                    <mat-label>Introduzca si lo desea el criterio para obtener el primer nivel de privilegios
                    </mat-label>
                    <input matInput formControlName="criterioprivilegio1" placeholder="" requiered>
                  </mat-form-field>
                  <mat-form-field>
                    <mat-label>Introduzca si lo desea el criterio para obtener el segundo nivel de privilegios
                    </mat-label>
                    <input matInput formControlName="criterioprivilegio2" placeholder="" requiered>
                  </mat-form-field>
                  <mat-form-field>
                    <mat-label>Introduzca si lo desea el criterio para obtener el tercer nivel de privilegios
                    </mat-label>
                    <input matInput formControlName="criterioprivilegio3" placeholder="" requiered>
                  </mat-form-field>

                  <div class="btnCambiarStep">
                    <button type="button" class="btn Back" matStepperPrevious>Atrás</button>
                    <button type="button" class="btn Next" matStepperNext>Siguiente</button>
                  </div>
                </mat-step>

                <mat-step>
                  <ng-template matStepLabel>Finalizar</ng-template>

                  <span style="font-weight: bold;color:green;"> Has elegido ... {{tipoDeJuegoSeleccionado}}...
                    {{tipoJuegoCompeticionSeleccionado}} ... {{modoDeJuegoSeleccionado}} </span>
                  <div class="btnCambiarStep">
                    <button type="button" class="btn Back" matStepperPrevious>Atrás</button>
                    <button style="width: 60%" type="button" class="btn Aceptar" (click)="CrearJuegoCuento()">Crear
                      juego de Cuentos</button>
                  </div>
                </mat-step>
              </div>
            </mat-horizontal-stepper>
          </mat-card-content>
        </mat-card>
      </form>
    </mat-tab>
  </mat-tab-group>

</div>
<div class="enColumna"> <button type="button" class="btn Back" (click)="goBack()">Volver </button>
</div>